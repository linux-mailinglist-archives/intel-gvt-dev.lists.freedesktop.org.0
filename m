Return-Path: <intel-gvt-dev-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gvt-dev@lfdr.de
Delivered-To: lists+intel-gvt-dev@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E7921E7D1
	for <lists+intel-gvt-dev@lfdr.de>; Wed, 15 May 2019 07:12:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E92F689487;
	Wed, 15 May 2019 05:12:43 +0000 (UTC)
X-Original-To: intel-gvt-dev@lists.freedesktop.org
Delivered-To: intel-gvt-dev@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5F5E089487
 for <intel-gvt-dev@lists.freedesktop.org>;
 Wed, 15 May 2019 05:12:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 May 2019 22:12:41 -0700
X-ExtLoop1: 1
Received: from fmsmsx104.amr.corp.intel.com ([10.18.124.202])
 by orsmga004.jf.intel.com with ESMTP; 14 May 2019 22:12:41 -0700
Received: from fmsmsx123.amr.corp.intel.com (10.18.125.38) by
 fmsmsx104.amr.corp.intel.com (10.18.124.202) with Microsoft SMTP Server (TLS)
 id 14.3.408.0; Tue, 14 May 2019 22:12:40 -0700
Received: from shsmsx104.ccr.corp.intel.com (10.239.4.70) by
 fmsmsx123.amr.corp.intel.com (10.18.125.38) with Microsoft SMTP Server (TLS)
 id 14.3.408.0; Tue, 14 May 2019 22:12:40 -0700
Received: from shsmsx101.ccr.corp.intel.com ([169.254.1.129]) by
 SHSMSX104.ccr.corp.intel.com ([169.254.5.33]) with mapi id 14.03.0415.000;
 Wed, 15 May 2019 13:12:38 +0800
From: "Zhang, Tina" <tina.zhang@intel.com>
To: Zhenyu Wang <zhenyuw@linux.intel.com>
Subject: RE: [RFC PATCH v2 3/3] drm/i915/gvt: Enable vGPU direct flip
Thread-Topic: [RFC PATCH v2 3/3] drm/i915/gvt: Enable vGPU direct flip
Thread-Index: AQHVBufGug13uVkzdUiu9SGq8uHdSaZn5nyAgAPDRfA=
Date: Wed, 15 May 2019 05:12:37 +0000
Message-ID: <237F54289DF84E4997F34151298ABEBC87612792@SHSMSX101.ccr.corp.intel.com>
References: <1557461728-2831-1-git-send-email-tina.zhang@intel.com>
 <1557461728-2831-4-git-send-email-tina.zhang@intel.com>
 <20190513033735.GA12913@zhen-hp.sh.intel.com>
In-Reply-To: <20190513033735.GA12913@zhen-hp.sh.intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiY2NiNGVlYzQtYmYxYS00OTMwLThkM2QtOGNjYTA2OGY4MDVhIiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiTitkbW9kQTJOc0lsWDEzMStvYWdlSmJRNmd4Z2FsblhuNWprV25QQm1CaVN5RXRmbVJPZlF5bzJJNEdKa2VVVCJ9
x-ctpclassification: CTP_NT
dlp-product: dlpe-windows
dlp-version: 11.0.600.7
dlp-reaction: no-action
x-originating-ip: [10.239.127.40]
MIME-Version: 1.0
X-BeenThere: intel-gvt-dev@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: "Intel GVT \(Graphics Virtualization\) development list"
 <intel-gvt-dev.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gvt-dev>
List-Post: <mailto:intel-gvt-dev@lists.freedesktop.org>
List-Help: <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=subscribe>
Cc: "Tian, Kevin" <kevin.tian@intel.com>,
 "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>, "Yuan,
 Hang" <hang.yuan@intel.com>, "kraxel@redhat.com" <kraxel@redhat.com>,
 "daniel@ffwll.ch" <daniel@ffwll.ch>, "Kondapally, 
 Kalyan" <kalyan.kondapally@intel.com>,
 "intel-gvt-dev@lists.freedesktop.org" <intel-gvt-dev@lists.freedesktop.org>,
 "Wang, Zhi A" <zhi.a.wang@intel.com>, "Lv, Zhiyuan" <zhiyuan.lv@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gvt-dev-bounces@lists.freedesktop.org
Sender: "intel-gvt-dev" <intel-gvt-dev-bounces@lists.freedesktop.org>

Cgo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tCj4gRnJvbTogWmhlbnl1IFdhbmcgW21haWx0
bzp6aGVueXV3QGxpbnV4LmludGVsLmNvbV0KPiBTZW50OiBNb25kYXksIE1heSAxMywgMjAxOSAx
MTozOCBBTQo+IFRvOiBaaGFuZywgVGluYSA8dGluYS56aGFuZ0BpbnRlbC5jb20+Cj4gQ2M6IGty
YXhlbEByZWRoYXQuY29tOyB6aGVueXV3QGxpbnV4LmludGVsLmNvbTsgTHYsIFpoaXl1YW4KPiA8
emhpeXVhbi5sdkBpbnRlbC5jb20+OyBXYW5nLCBaaGkgQSA8emhpLmEud2FuZ0BpbnRlbC5jb20+
OyBUaWFuLCBLZXZpbgo+IDxrZXZpbi50aWFuQGludGVsLmNvbT47IGRhbmllbEBmZndsbC5jaDsg
S29uZGFwYWxseSwgS2FseWFuCj4gPGthbHlhbi5rb25kYXBhbGx5QGludGVsLmNvbT47IFl1YW4s
IEhhbmcgPGhhbmcueXVhbkBpbnRlbC5jb20+Owo+IHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tOyBpbnRlbC1ndnQtZGV2QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IFN1YmplY3Q6IFJlOiBb
UkZDIFBBVENIIHYyIDMvM10gZHJtL2k5MTUvZ3Z0OiBFbmFibGUgdkdQVSBkaXJlY3QgZmxpcAo+
IAo+IE9uIDIwMTkuMDUuMTAgMTI6MTU6MjggKzA4MDAsIFRpbmEgWmhhbmcgd3JvdGU6Cj4gPiBX
aGVuIHZHUFUgZG9lcyBwYWdlIGZsaXAsIGRpc3BsYXkgbW9kZWwgZmxpcHMgdGhlIHNoYWRvdyBm
cmFtZWJ1ZmZlcgo+ID4gdG8gdGhlIGFzc2lnbmVkIGhhcmR3YXJlIHBsYW5lIHRocm91Z2ggZHJt
IGRpc3BsYXkgZnJhbWV3b3JrLgo+ID4KPiA+IFNpZ25lZC1vZmYtYnk6IFRpbmEgWmhhbmcgPHRp
bmEuemhhbmdAaW50ZWwuY29tPgo+ID4gLS0tCj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L2RtYWJ1Zi5jICAgfCAgIDggKy0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvZG1hYnVm
LmggICB8ICAgNiArCj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2hhbmRsZXJzLmMgfCAz
MzIKPiA+ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ID4gIDMgZmlsZXMg
Y2hhbmdlZCwgMzQ1IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiA+Cj4gPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2RtYWJ1Zi5jCj4gPiBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d2dC9kbWFidWYuYwo+ID4gaW5kZXggZTlhZGNkNC4uYjZkOTMxNyAxMDA2NDQK
PiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9kbWFidWYuYwo+ID4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2RtYWJ1Zi5jCj4gPiBAQCAtMjAxLDcgKzIwMSw3IEBAIHN0
YXRpYyBib29sIHZhbGlkYXRlX2hvdHNwb3Qoc3RydWN0Cj4gaW50ZWxfdmdwdV9jdXJzb3JfcGxh
bmVfZm9ybWF0ICpjKQo+ID4gIAkJcmV0dXJuIGZhbHNlOwo+ID4gIH0KPiA+Cj4gPiAtc3RhdGlj
IGludCB2Z3B1X2dldF9wbGFuZV9pbmZvKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gPiAraW50
IHZncHVfZ2V0X3BsYW5lX2luZm8oc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiA+ICAJCXN0cnVj
dCBpbnRlbF92Z3B1ICp2Z3B1LAo+ID4gIAkJc3RydWN0IGludGVsX3ZncHVfZmJfaW5mbyAqaW5m
bywKPiA+ICAJCWludCBwbGFuZV9pZCkKPiA+IEBAIC0yMjEsNiArMjIxLDggQEAgc3RhdGljIGlu
dCB2Z3B1X2dldF9wbGFuZV9pbmZvKHN0cnVjdCBkcm1fZGV2aWNlCj4gKmRldiwKPiA+ICAJCWlu
Zm8tPmhlaWdodCA9IHAuaGVpZ2h0Owo+ID4gIAkJaW5mby0+c3RyaWRlID0gcC5zdHJpZGU7Cj4g
PiAgCQlpbmZvLT5kcm1fZm9ybWF0ID0gcC5kcm1fZm9ybWF0Owo+ID4gKwkJaW5mby0+c3JjX3gg
PSBwLnhfb2Zmc2V0Owo+ID4gKwkJaW5mby0+c3JjX3kgPSBwLnlfb2Zmc2V0Owo+ID4KPiA+ICAJ
CXN3aXRjaCAocC50aWxlZCkgewo+ID4gIAkJY2FzZSBQTEFORV9DVExfVElMRURfTElORUFSOgo+
ID4gQEAgLTI4OSw2ICsyOTEsOCBAQCBzdGF0aWMgaW50IHZncHVfZ2V0X3BsYW5lX2luZm8oc3Ry
dWN0IGRybV9kZXZpY2UKPiAqZGV2LAo+ID4gIAkJcmV0dXJuIC1FRkFVTFQ7Cj4gPiAgCX0KPiA+
Cj4gPiArCWluZm8tPnZncHVfaWQgPSB2Z3B1LT5pZDsKPiA+ICsKPiA+ICAJcmV0dXJuIDA7Cj4g
PiAgfQo+ID4KPiA+IEBAIC00MDYsNiArNDEwLDggQEAgaW50IGludGVsX3ZncHVfcXVlcnlfcGxh
bmUoc3RydWN0IGludGVsX3ZncHUKPiA+ICp2Z3B1LCB2b2lkICphcmdzKQo+ID4KPiA+ICAJbXV0
ZXhfdW5sb2NrKCZ2Z3B1LT5kbWFidWZfbG9jayk7Cj4gPgo+ID4gKwlmYl9pbmZvLnZncHVfaWQg
PSB2Z3B1LT5pZDsKPiA+ICsKPiA+ICAJLyogTmVlZCB0byBhbGxvY2F0ZSBhIG5ldyBvbmUqLwo+
ID4gIAlkbWFidWZfb2JqID0ga21hbGxvYyhzaXplb2Yoc3RydWN0IGludGVsX3ZncHVfZG1hYnVm
X29iaiksCj4gR0ZQX0tFUk5FTCk7Cj4gPiAgCWlmICh1bmxpa2VseSghZG1hYnVmX29iaikpIHsK
PiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvZG1hYnVmLmgKPiA+IGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2RtYWJ1Zi5oCj4gPiBpbmRleCBjZjk3ZWI0Li4xODQ0
NDViIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2RtYWJ1Zi5oCj4g
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvZG1hYnVmLmgKPiA+IEBAIC00Niw2ICs0
Niw4IEBAIHN0cnVjdCBpbnRlbF92Z3B1X2ZiX2luZm8gewo+ID4gIAlfX3UzMiB4X2hvdDsgICAg
LyogaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiBjdXJzb3IgaG90c3BvdCAqLwo+ID4gIAlfX3UzMiB5
X2hvdDsgICAgLyogdmVydGljYWwgcG9zaXRpb24gb2YgY3Vyc29yIGhvdHNwb3QgKi8KPiA+ICAJ
X191MzIgdmdwdV9pZDsKPiA+ICsJX191MzIgc3JjX3g7Cj4gPiArCV9fdTMyIHNyY195Owo+ID4g
IAlzdHJ1Y3QgaW50ZWxfdmdwdV9kbWFidWZfb2JqICpvYmo7Cj4gPiAgfTsKPiA+Cj4gPiBAQCAt
NjYsNCArNjgsOCBAQCBpbnQgaW50ZWxfdmdwdV9nZXRfZG1hYnVmKHN0cnVjdCBpbnRlbF92Z3B1
ICp2Z3B1LAo+ID4gdW5zaWduZWQgaW50IGRtYWJ1Zl9pZCk7ICB2b2lkIGludGVsX3ZncHVfZG1h
YnVmX2NsZWFudXAoc3RydWN0Cj4gPiBpbnRlbF92Z3B1ICp2Z3B1KTsgIHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICp2Z3B1X2NyZWF0ZV9nZW0oc3RydWN0Cj4gZHJtX2RldmljZSAqZGV2LAo+
ID4gIAkJCQkJICAgIHN0cnVjdCBpbnRlbF92Z3B1X2ZiX2luZm8gKmluZm8pOwo+ID4gK2ludCB2
Z3B1X2dldF9wbGFuZV9pbmZvKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gPiArCQkJc3RydWN0
IGludGVsX3ZncHUgKnZncHUsCj4gPiArCQkJc3RydWN0IGludGVsX3ZncHVfZmJfaW5mbyAqaW5m
bywKPiA+ICsJCQlpbnQgcGxhbmVfaWQpOwo+ID4gICNlbmRpZgo+ID4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9oYW5kbGVycy5jCj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d2dC9oYW5kbGVycy5jCj4gPiBpbmRleCAxOGYwMWVlLi42OThhNzJkIDEwMDY0NAo+ID4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2hhbmRsZXJzLmMKPiA+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d2dC9oYW5kbGVycy5jCj4gPiBAQCAtMzYsNiArMzYsOCBAQAo+ID4K
PiA+ICAgKi8KPiA+Cj4gPiArI2luY2x1ZGUgPGRybS9kcm1fbW9kZXNldF9oZWxwZXIuaD4KPiA+
ICsjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfdWFwaS5oPgo+ID4gICNpbmNsdWRlICJpOTE1X2Ry
di5oIgo+ID4gICNpbmNsdWRlICJndnQuaCIKPiA+ICAjaW5jbHVkZSAiaTkxNV9wdmluZm8uaCIK
PiA+IEBAIC03NDMsNiArNzQ1LDMzNCBAQCBzdGF0aWMgaW50IHNvdXRoX2NoaWNrZW4yX21taW9f
d3JpdGUoc3RydWN0Cj4gaW50ZWxfdmdwdSAqdmdwdSwKPiA+ICAJcmV0dXJuIDA7Cj4gPiAgfQo+
ID4KPiA+ICtzdGF0aWMgaW50IHZncHVfZmJfdXBkYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
Cj4gPiArCQkJIHN0cnVjdCBpbnRlbF92Z3B1ICp2Z3B1LAo+ID4gKwkJCSBpbnQgcGxhbmVfaWQs
Cj4gPiArCQkJIHN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyICptb2RlX2NtZCkgewo+ID4gKwlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+ID4gKwlzdHJ1Y3QgaW50ZWxfdmdwdV9mYl9p
bmZvIGluZm87Cj4gPiArCWludCByZXQ7Cj4gPiArCj4gPiArCXJldCA9IHZncHVfZ2V0X3BsYW5l
X2luZm8oZGV2LCB2Z3B1LCAmaW5mbywgcGxhbmVfaWQpOwo+ID4gKwlpZiAocmV0IHx8ICFpbmZv
LnNpemUgfHwgIWluZm8uZHJtX2Zvcm1hdCkKPiA+ICsJCXJldHVybiByZXQ7Cj4gPiArCj4gPiAr
CWlmIChwbGFuZV9pZCA9PSBEUk1fUExBTkVfVFlQRV9QUklNQVJZKQo+ID4gKwkJb2JqID0gdmdw
dS0KPiA+ZGlzcGxheS5zaGFkb3dfZmJzLnNoYWRvd19vYmpbUFJJTUFSWV9QTEFORV07Cj4gPiAr
CWVsc2UgaWYgKHBsYW5lX2lkID09IERSTV9QTEFORV9UWVBFX0NVUlNPUikKPiA+ICsJCW9iaiA9
IHZncHUtCj4gPmRpc3BsYXkuc2hhZG93X2Zicy5zaGFkb3dfb2JqW0NVUlNPUl9QTEFORV07Cj4g
PiArCWVsc2UKPiA+ICsJCW9iaiA9IHZncHUtPmRpc3BsYXkuc2hhZG93X2Zicy5zaGFkb3dfb2Jq
W1NQUklURV9QTEFORV07Cj4gPiArCj4gPiArCWlmIChvYmogPT0gTlVMTCkKPiA+ICsJCXJldHVy
biAtRU5PREVWOwo+ID4gKwo+ID4gKwltZW1jcHkob2JqLT5ndnRfaW5mbywgJmluZm8sIHNpemVv
ZihpbmZvKSk7Cj4gPiArCj4gPiArCW1vZGVfY21kLT5waXhlbF9mb3JtYXQgPSBpbmZvLmRybV9m
b3JtYXQ7Cj4gPiArCW1vZGVfY21kLT53aWR0aCA9IGluZm8ud2lkdGg7Cj4gPiArCW1vZGVfY21k
LT5oZWlnaHQgPSBpbmZvLmhlaWdodDsKPiA+ICsJbW9kZV9jbWQtPmhhbmRsZXNbMF0gPSAwOwo+
ID4gKwltb2RlX2NtZC0+b2Zmc2V0c1swXSA9IDA7Cj4gPiArCW1vZGVfY21kLT5waXRjaGVzWzBd
ID0gaW5mby5zdHJpZGU7Cj4gPiArCW1vZGVfY21kLT5mbGFncyA9IERSTV9NT0RFX0ZCX01PRElG
SUVSUzsKPiA+ICsJbW9kZV9jbWQtPm1vZGlmaWVyWzBdID0gaW5mby5kcm1fZm9ybWF0X21vZDsK
PiA+ICsKPiA+ICsJcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGludCBjaGVj
a192Z3B1X3BsYW5lX2Fzc2lnbm1lbnRfc3RhdHVzKHN0cnVjdCBpbnRlbF92Z3B1ICp2Z3B1LAo+
ID4gKwkJCQkJICAgICAgZW51bSBwbGFuZV9pZCBwbGFuZV9pZCwKPiA+ICsJCQkJCSAgICAgIHN0
cnVjdCBkcm1fY3J0YyAqKmNydGMsCj4gPiArCQkJCQkgICAgICBzdHJ1Y3QgZHJtX3BsYW5lICoq
ZHJtX3BsYW5lLAo+ID4gKwkJCQkJICAgICAgc3RydWN0IGRybV9wbGFuZQo+ICoqY3VyX2RybV9w
bGFuZSkgewo+ID4gKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJnZncHUtPmd2dC0+ZGV2X3By
aXYtPmRybTsKPiA+ICsJc3RydWN0IGRybV9wbGFuZSAqcGxhbmU7Cj4gPiArCXN0cnVjdCBpbnRl
bF9wbGFuZSAqaW50ZWxfcGxhbmU7Cj4gPiArCXN0cnVjdCBkcm1fbW9kZV9vYmplY3QgKm9ial9m
YjsKPiA+ICsJc3RydWN0IGludGVsX2ZyYW1lYnVmZmVyICppbnRlbF9mYjsKPiA+ICsJc3RydWN0
IGRybV9nZW1fb2JqZWN0ICpnZW1fb2JqOwo+ID4gKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqaTkxNV9nZW1fb2JqOwo+ID4gKwlzdHJ1Y3QgaW50ZWxfdmdwdV9mYl9pbmZvICpmYl9pbmZv
Owo+ID4gKwl1MzIgZmJfaWQgPSAwOwo+ID4gKwlpbnQgcmV0ID0gMDsKPiA+ICsKPiA+ICsJKmNy
dGMgPSBOVUxMOwo+ID4gKwkqZHJtX3BsYW5lID0gTlVMTDsKPiA+ICsKPiA+ICsJZHJtX2Zvcl9l
YWNoX3BsYW5lKHBsYW5lLCBkZXYpIHsKPiA+ICsJCWludGVsX3BsYW5lID0gdG9faW50ZWxfcGxh
bmUocGxhbmUpOwo+ID4gKwkJaWYgKGludGVsX3BsYW5lLT5pZCA9PSBwbGFuZV9pZCkgewo+ID4g
KwkJCWlmIChwbGFuZS0+c3RhdGUgJiYgcGxhbmUtPnN0YXRlLT5mYikKPiA+ICsJCQkJZmJfaWQg
PSBwbGFuZS0+c3RhdGUtPmZiLT5iYXNlLmlkOwo+ID4gKwkJCWVsc2UgaWYgKCFwbGFuZS0+c3Rh
dGUgJiYgcGxhbmUtPmZiKQo+ID4gKwkJCQlmYl9pZCA9IHBsYW5lLT5mYi0+YmFzZS5pZDsKPiA+
ICsJCQllbHNlCj4gPiArCQkJCWNvbnRpbnVlOwo+ID4gKwo+ID4gKwkJCW9ial9mYiA9IGlkcl9m
aW5kKCZkZXYtPm1vZGVfY29uZmlnLm9iamVjdF9pZHIsCj4gZmJfaWQpOwo+ID4gKwkJCWludGVs
X2ZiID0gdG9faW50ZWxfZnJhbWVidWZmZXIob2JqX3RvX2ZiKG9ial9mYikpOwo+ID4gKwkJCWdl
bV9vYmogPSBpbnRlbF9mYi0+YmFzZS5vYmpbMF07Cj4gPiArCQkJaTkxNV9nZW1fb2JqID0gdG9f
aW50ZWxfYm8oZ2VtX29iaik7Cj4gPiArCQkJZmJfaW5mbyA9IGk5MTVfZ2VtX29iai0+Z3Z0X2lu
Zm87Cj4gPiArCj4gPiArCQkJaWYgKGk5MTVfZ2VtX29iamVjdF9pc19wcm94eShpOTE1X2dlbV9v
YmopICYmCj4gPiArCQkJICAgIGZiX2luZm8gJiYgZmJfaW5mby0+dmdwdV9pZCA9PSB2Z3B1LT5p
ZCAmJgo+ID4gKwkJCSAgICBwbGFuZS0+dHlwZSA9PSBEUk1fUExBTkVfVFlQRV9QUklNQVJZKSB7
Cj4gPiArCQkJCWlmIChwbGFuZS0+c3RhdGUgJiYgcGxhbmUtPnN0YXRlLT5jcnRjKSB7Cj4gPiAr
CQkJCQkqY3J0YyA9IHBsYW5lLT5zdGF0ZS0+Y3J0YzsKPiA+ICsJCQkJCSpkcm1fcGxhbmUgPSBw
bGFuZTsKPiA+ICsJCQkJCSpjdXJfZHJtX3BsYW5lID0KPiA+ICsJCQkJCQlwbGFuZS0+c3RhdGUt
PmNydGMtPmN1cnNvcjsKPiA+ICsJCQkJCWJyZWFrOwo+ID4gKwkJCQl9IGVsc2UgaWYgKCFwbGFu
ZS0+c3RhdGUgJiYgcGxhbmUtPmNydGMpIHsKPiA+ICsJCQkJCSpjcnRjID0gcGxhbmUtPmNydGM7
Cj4gPiArCQkJCQkqZHJtX3BsYW5lID0gcGxhbmU7Cj4gPiArCQkJCQkqY3VyX2RybV9wbGFuZSA9
IHBsYW5lLT5jcnRjLQo+ID5jdXJzb3I7Cj4gPiArCQkJCQlicmVhazsKPiA+ICsJCQkJfQo+IAo+
IEluc3RlYWQgb2Ygd2Fsa2luZyBhbGwgcGxhbmVzIGV2ZXJ5IHRpbWUsIHdoeSBub3QgbGV0IGk5
MTUgZGlzcGxheSB0byBwcm92aWRlIGEKPiBoZWxwZXIgdG8gZ2V0IHZHUFUgcGxhbmUgYXNzaWdu
ZWQgcGlwZSBpbmZvPyB3aGljaCBjYW4gYmUgZ290IGZyb20gZmIncyBnZW0KPiBvYmplY3QgdG8g
Y2hlY2sgaXRzIGd2dF9pbmZvLgpUaGF0IGNvdWxkIGJlIGFub3RoZXIgb3B0aW9uLgoKPiAKPiA+
ICsJCQl9Cj4gPiArCQl9Cj4gPiArCX0KPiA+ICsKPiA+ICsJaWYgKGZiX2lkID09IDAgfHwgKmNy
dGMgPT0gTlVMTCB8fCAqZHJtX3BsYW5lID09IE5VTEwpCj4gPiArCQlyZXQgPSAtMTsKPiA+ICsK
PiA+ICsJcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgX19pOTE1X2dl
bV9vYmplY3RfcmVzZXRfcGFnZV9pdGVyKHN0cnVjdAo+ID4gK2RybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaikgewo+ID4gKwlzdHJ1Y3QgcmFkaXhfdHJlZV9pdGVyIGl0ZXI7Cj4gPiArCXZvaWQgX19y
Y3UgKipzbG90Owo+ID4gKwo+ID4gKwlyY3VfcmVhZF9sb2NrKCk7Cj4gPiArCXJhZGl4X3RyZWVf
Zm9yX2VhY2hfc2xvdChzbG90LCAmb2JqLT5tbS5nZXRfcGFnZS5yYWRpeCwgJml0ZXIsIDApCj4g
PiArCQlyYWRpeF90cmVlX2RlbGV0ZSgmb2JqLT5tbS5nZXRfcGFnZS5yYWRpeCwgaXRlci5pbmRl
eCk7Cj4gPiArCXJjdV9yZWFkX3VubG9jaygpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgc3Ry
dWN0IHNnX3RhYmxlICoKPiA+ICtfX2k5MTVfZ2VtX29iamVjdF91bnNldF9wYWdlcyhzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKSB7Cj4gCj4gQ29weSBpOTE1IGludGVybmFsIGZ1bmN0
aW9uIGlzIG5vdCBnb29kLi5hbmQgdGhpcyBpcyB0b28gaGFja2luZy4gSSB0aGluayB3aGVuCj4g
bmV3IGRpc3BsYXkgZmxpcCwgeW91IG5lZWQgdG8gdW5yZWZlcmVuY2Ugb2xkIGJ1ZmZlciBhbmQg
Y3JlYXRlIG5ldyBvbmUgdG8KPiByZWZlcmVuY2UgbmV3IGJhY2tpbmcgcGFnZXMuCk9LLiBUaGFu
a3MuCgpCUiwKVGluYQo+IAo+ID4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRv
X2k5MTUob2JqLT5iYXNlLmRldik7Cj4gPiArCXN0cnVjdCBzZ190YWJsZSAqcGFnZXM7Cj4gPiAr
Cj4gPiArCXBhZ2VzID0gZmV0Y2hfYW5kX3plcm8oJm9iai0+bW0ucGFnZXMpOwo+ID4gKwlpZiAo
SVNfRVJSX09SX05VTEwocGFnZXMpKQo+ID4gKwkJcmV0dXJuIHBhZ2VzOwo+ID4gKwo+ID4gKwlz
cGluX2xvY2soJmk5MTUtPm1tLm9ial9sb2NrKTsKPiA+ICsJbGlzdF9kZWwoJm9iai0+bW0ubGlu
ayk7Cj4gPiArCXNwaW5fdW5sb2NrKCZpOTE1LT5tbS5vYmpfbG9jayk7Cj4gPiArCj4gPiArCWlm
IChvYmotPm1tLm1hcHBpbmcpIHsKPiA+ICsJCXZvaWQgKnB0cjsKPiA+ICsKPiA+ICsJCXB0ciA9
IHBhZ2VfbWFza19iaXRzKG9iai0+bW0ubWFwcGluZyk7Cj4gPiArCQlpZiAoaXNfdm1hbGxvY19h
ZGRyKHB0cikpCj4gPiArCQkJdnVubWFwKHB0cik7Cj4gPiArCQllbHNlCj4gPiArCQkJa3VubWFw
KGttYXBfdG9fcGFnZShwdHIpKTsKPiA+ICsKPiA+ICsJCW9iai0+bW0ubWFwcGluZyA9IE5VTEw7
Cj4gPiArCX0KPiA+ICsKPiA+ICsJX19pOTE1X2dlbV9vYmplY3RfcmVzZXRfcGFnZV9pdGVyKG9i
aik7Cj4gPiArCW9iai0+bW0ucGFnZV9zaXplcy5waHlzID0gb2JqLT5tbS5wYWdlX3NpemVzLnNn
ID0gMDsKPiA+ICsKPiA+ICsJcmV0dXJuIHBhZ2VzOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMg
aW50IGhhbmRsZV92Z3B1X3BhZ2VfZmxpcChzdHJ1Y3QgaW50ZWxfdmdwdSAqdmdwdSwgaW50IHBp
cGUsCj4gPiArCQkJCSBlbnVtIHBsYW5lX2lkIHBsYW5lX2lkKQo+ID4gK3sKPiA+ICsgICAgICAg
Lyogc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdmdwdS0+Z3Z0LT5kZXZfcHJp
djsgKi8KPiA+ICsgICAgICAgLyogc3RydWN0IGludGVsX3ZncHVfcGxhbmVfaW5mbyB2Z3B1X3Bs
YW5lX2luZm87ICovCj4gPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSAmdmdwdS0+Z3Z0LT5k
ZXZfcHJpdi0+ZHJtOwo+ID4gKwlzdHJ1Y3QgZHJtX21vZGVzZXRfYWNxdWlyZV9jdHggY3R4Owo+
ID4gKwlzdHJ1Y3QgZHJtX2NydGMgKmNydGM7Cj4gPiArCXN0cnVjdCBkcm1fcGxhbmUgKnBsYW5l
LCAqY3VyX3BsYW5lOwo+ID4gKwlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpwcmlfZmIsICpjdXJf
ZmI7Cj4gPiArCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpwcmlfb2JqLCAqY3VyX29iajsK
PiA+ICsJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlOwo+ID4gKwlzdHJ1Y3QgZHJtX3Bs
YW5lX3N0YXRlICpwbGFuZV9zdGF0ZSA9IE5VTEwsICpjdXJfcGxhbmVfc3RhdGUgPQo+IE5VTEw7
Cj4gPiArCXN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyIG1vZGVfY21kOwo+ID4gKwlzdHJ1Y3QgaW50
ZWxfdmdwdV9mYl9pbmZvICpmYl9pbmZvOwo+ID4gKwlpbnQgcmV0ID0gMDsKPiA+ICsKPiA+ICsJ
aWYgKCF2Z3B1LT5kaXNwbGF5LnNoYWRvd19mYnMuZW5hYmxlX2RpcmVjdF9mbGlwKQo+ID4gKwkJ
cmV0dXJuIHJldDsKPiA+ICsKPiA+ICsJZHJtX21vZGVzZXRfYWNxdWlyZV9pbml0KCZjdHgsCj4g
RFJNX01PREVTRVRfQUNRVUlSRV9JTlRFUlJVUFRJQkxFKTsKPiA+ICtyZXRyeToKPiA+ICsJcmV0
ID0gZHJtX21vZGVzZXRfbG9ja19hbGxfY3R4KGRybSwgJmN0eCk7Cj4gPiArCWlmIChyZXQpCj4g
PiArCQlnb3RvIGZhaWw7Cj4gPiArCj4gPiArCS8qIDEuIENoZWNrIGFzc2lnbm1lbnQgc3RhdHVz
ICovCj4gPiArCXJldCA9IGNoZWNrX3ZncHVfcGxhbmVfYXNzaWdubWVudF9zdGF0dXModmdwdSwg
cGxhbmVfaWQsICZjcnRjLAo+ID4gKwkJCQkJCSAmcGxhbmUsICZjdXJfcGxhbmUpOwo+ID4gKwlp
ZiAocmV0KSB7Cj4gPiArCQlEUk1fREVCVUdfS01TKCIlcywgdmdwdSBwbGFuZSAlZCBoYXMgbm8g
YXNzZ2luZWQKPiBwbGFuZVxuIiwKPiA+ICsJCQkgICAgICBfX2Z1bmNfXywgcGxhbmVfaWQpOwo+
ID4gKwkJcmV0ID0gLUVJTlZBTDsKPiA+ICsJCWdvdG8gZmFpbDsKPiA+ICsJfQo+ID4gKwkvKiAy
LiBVcGRhdGUgc2hhZG93IHByaW1hcnkgcGxhbmUgKi8KPiA+ICsJaWYgKHBsYW5lX2lkID09IFBM
QU5FX1BSSU1BUlkpIHsKPiA+ICsJCXByaV9mYiA9IHZncHUtCj4gPmRpc3BsYXkuc2hhZG93X2Zi
cy5zaGFkb3dfZmJbUFJJTUFSWV9QTEFORV07Cj4gPiArCQlwcmlfb2JqID0gdmdwdS0KPiA+ZGlz
cGxheS5zaGFkb3dfZmJzLnNoYWRvd19vYmpbUFJJTUFSWV9QTEFORV07Cj4gPiArCj4gPiArCQlm
Yl9pbmZvID0gcHJpX29iai0+Z3Z0X2luZm87Cj4gPiArCj4gPiArCQlzdGF0ZSA9IGRybV9hdG9t
aWNfc3RhdGVfYWxsb2MoZHJtKTsKPiA+ICsJCWlmICghc3RhdGUpCj4gPiArCQkJZ290byBmYWls
Owo+ID4gKwo+ID4gKwkJc3RhdGUtPmFjcXVpcmVfY3R4ID0gJmN0eDsKPiA+ICsJCXBsYW5lX3N0
YXRlID0gZHJtX2F0b21pY19nZXRfcGxhbmVfc3RhdGUoc3RhdGUsIHBsYW5lKTsKPiA+ICsJCWlm
IChJU19FUlIocGxhbmVfc3RhdGUpKSB7Cj4gPiArCQkJcmV0ID0gUFRSX0VSUihwbGFuZV9zdGF0
ZSk7Cj4gPiArCQkJZ290byBvdXQ7Cj4gPiArCQl9Cj4gPiArCj4gPiArCQlyZXQgPSB2Z3B1X2Zi
X3VwZGF0ZShkcm0sIHZncHUsCj4gRFJNX1BMQU5FX1RZUEVfUFJJTUFSWSwgJm1vZGVfY21kKTsK
PiA+ICsJCWlmIChyZXQpIHsKPiA+ICsJCQlEUk1fREVCVUdfS01TKCJ2Z3B1X2ZiX3VwZGF0ZSBm
YWlsZWRcbiIpOwo+ID4gKwkJCWdvdG8gb3V0Owo+ID4gKwkJfQo+ID4gKwo+ID4gKwkJZHJtX2hl
bHBlcl9tb2RlX2ZpbGxfZmJfc3RydWN0KGRybSwgcHJpX2ZiLCAmbW9kZV9jbWQpOwo+ID4gKwkJ
cmV0ID0gZHJtX2F0b21pY19zZXRfY3J0Y19mb3JfcGxhbmUocGxhbmVfc3RhdGUsIGNydGMpOwo+
ID4gKwkJaWYgKHJldCAhPSAwKQo+ID4gKwkJCWdvdG8gb3V0Owo+ID4gKwkJaWYgKHBsYW5lX3N0
YXRlLT5mYiAhPSBwcmlfZmIpCj4gPiArCQkJZHJtX2F0b21pY19zZXRfZmJfZm9yX3BsYW5lKHBs
YW5lX3N0YXRlLCBwcmlfZmIpOwo+ID4gKwo+ID4gKwkJcGxhbmVfc3RhdGUtPnNyY194ID0gZmJf
aW5mby0+c3JjX3g7Cj4gPiArCQlwbGFuZV9zdGF0ZS0+c3JjX3kgPSBmYl9pbmZvLT5zcmNfeTsK
PiA+ICsJCXBsYW5lX3N0YXRlLT5zcmNfdyA9IG1vZGVfY21kLndpZHRoIDw8IDE2Owo+ID4gKwkJ
cGxhbmVfc3RhdGUtPnNyY19oID0gbW9kZV9jbWQuaGVpZ2h0IDw8IDE2Owo+ID4gKwo+ID4gKwkJ
LyogRG9uJ3QgYWxsb3cgZnVsbCBtb2Rlc2V0ICovCj4gPiArCQlzdGF0ZS0+YWxsb3dfbW9kZXNl
dCA9IGZhbHNlOwo+ID4gKwo+ID4gKwkJaWYgKGk5MTVfZ2VtX29iamVjdF9oYXNfcGlubmVkX3Bh
Z2VzKHByaV9vYmopKSB7Cj4gPiArCQkJc3RydWN0IHNnX3RhYmxlICpwYWdlczsKPiA+ICsJCQlz
dHJ1Y3QgaTkxNV92bWEgKnZtYTsKPiA+ICsJCQlzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2
bSA9Cj4gPiArCQkJCQkJJnZncHUtPmd2dC0+ZGV2X3ByaXYtCj4gPmdndHQudm07Cj4gPiArCj4g
PiArCQkJcGFnZXMgPSBfX2k5MTVfZ2VtX29iamVjdF91bnNldF9wYWdlcyhwcmlfb2JqKTsKPiA+
ICsJCQlpZiAoIUlTX0VSUihwYWdlcykpCj4gPiArCQkJCXByaV9vYmotPm9wcy0+cHV0X3BhZ2Vz
KHByaV9vYmosIHBhZ2VzKTsKPiA+ICsJCQlyZXQgPSBwcmlfb2JqLT5vcHMtPmdldF9wYWdlcyhw
cmlfb2JqKTsKPiA+ICsKPiA+ICsJCQkvKiBwcmlfb2JqLT5jYWNoZV9kaXJ0eSA9IHRydWU7ICov
Cj4gPiArCj4gPiArCQkJdm1hID0gaTkxNV92bWFfaW5zdGFuY2UocHJpX29iaiwgdm0sIE5VTEwp
Owo+ID4gKwkJCWlmIChJU19FUlIodm1hKSkKPiA+ICsJCQkJZ290byBvdXQ7Cj4gPiArCj4gPiAr
CQkJdm1hLT5vcHMtPnNldF9wYWdlcyh2bWEpOwo+ID4gKwo+ID4gKwkJCXJldCA9IGk5MTVfdm1h
X2JpbmQodm1hLCB2bWEtPm9iaiA/Cj4gPiArCQkJCQkgICAgcHJpX29iai0+Y2FjaGVfbGV2ZWwg
OiAwLAo+ID4gKwkJCQkJICAgIFBJTl9VUERBVEUpOwo+ID4gKwkJCWlmIChyZXQpCj4gPiArCQkJ
CWdvdG8gb3V0Owo+ID4gKwkJfQo+ID4gKwo+ID4gKwkJLyogMy4gVXBkYXRlIHNoYWRvdyBjdXJz
b3IgcGxhbmUgKi8KPiA+ICsJCWlmIChjdXJfcGxhbmUpIHsKPiA+ICsJCQlyZXQgPSB2Z3B1X2Zi
X3VwZGF0ZShkcm0sIHZncHUsCj4gRFJNX1BMQU5FX1RZUEVfQ1VSU09SLAo+ID4gKwkJCQkJICAg
ICAmbW9kZV9jbWQpOwo+ID4gKwkJCWlmIChyZXQpIHsKPiA+ICsJCQkJRFJNX0RFQlVHX0tNUygi
Y3Vyc29yIHZncHVfZmJfdXBkYXRlCj4gZmFpbGVkXG4iKTsKPiA+ICsJCQkJZ290byBmbGlwOwo+
ID4gKwkJCX0KPiA+ICsJCQljdXJfZmIgPSB2Z3B1LQo+ID5kaXNwbGF5LnNoYWRvd19mYnMuc2hh
ZG93X2ZiW0NVUlNPUl9QTEFORV07Cj4gPiArCQkJY3VyX29iaiA9IHZncHUtCj4gPmRpc3BsYXku
c2hhZG93X2Zicy5zaGFkb3dfb2JqW0NVUlNPUl9QTEFORV07Cj4gPiArCQkJY3VyX3BsYW5lX3N0
YXRlID0KPiBkcm1fYXRvbWljX2dldF9wbGFuZV9zdGF0ZShzdGF0ZSwKPiA+ICsJCQkJCQkJCSAg
ICAgY3VyX3BsYW5lKTsKPiA+ICsJCQlpZiAoSVNfRVJSKGN1cl9wbGFuZV9zdGF0ZSkpIHsKPiA+
ICsJCQkJcmV0ID0gUFRSX0VSUihjdXJfcGxhbmVfc3RhdGUpOwo+ID4gKwkJCQlnb3RvIGZsaXA7
Cj4gPiArCQkJfQo+ID4gKwo+ID4gKwkJCWZiX2luZm8gPSBjdXJfb2JqLT5ndnRfaW5mbzsKPiA+
ICsJCQlkcm1faGVscGVyX21vZGVfZmlsbF9mYl9zdHJ1Y3QoZHJtLCBjdXJfZmIsCj4gJm1vZGVf
Y21kKTsKPiA+ICsJCQlyZXQgPQo+IGRybV9hdG9taWNfc2V0X2NydGNfZm9yX3BsYW5lKGN1cl9w
bGFuZV9zdGF0ZSwKPiA+ICsJCQkJCQkJICAgIGNydGMpOwo+ID4gKwkJCWlmIChyZXQgIT0gMCkK
PiA+ICsJCQkJZ290byBmbGlwOwo+ID4gKwkJCWlmIChjdXJfcGxhbmVfc3RhdGUtPmZiICE9IGN1
cl9mYikKPiA+ICsKPiAJZHJtX2F0b21pY19zZXRfZmJfZm9yX3BsYW5lKGN1cl9wbGFuZV9zdGF0
ZSwKPiA+ICsJCQkJCQkJICAgIGN1cl9mYik7Cj4gPiArCj4gPiArCQkJY3VyX3BsYW5lX3N0YXRl
LT5jcnRjX3ggPSBmYl9pbmZvLT54X3BvczsKPiA+ICsJCQljdXJfcGxhbmVfc3RhdGUtPmNydGNf
eSA9IGZiX2luZm8tPnlfcG9zOwo+ID4gKwkJCWN1cl9wbGFuZV9zdGF0ZS0+Y3J0Y193ID0gbW9k
ZV9jbWQud2lkdGg7Cj4gPiArCQkJY3VyX3BsYW5lX3N0YXRlLT5jcnRjX2ggPSBtb2RlX2NtZC5o
ZWlnaHQ7Cj4gPiArCQkJY3VyX3BsYW5lX3N0YXRlLT5zcmNfeCA9IDA7Cj4gPiArCQkJY3VyX3Bs
YW5lX3N0YXRlLT5zcmNfeSA9IDA7Cj4gPiArCQkJY3VyX3BsYW5lX3N0YXRlLT5zcmNfdyA9IG1v
ZGVfY21kLndpZHRoIDw8IDE2Owo+ID4gKwkJCWN1cl9wbGFuZV9zdGF0ZS0+c3JjX2ggPSBtb2Rl
X2NtZC5oZWlnaHQgPDwgMTY7Cj4gPiArCj4gPiArCQkJaWYgKGk5MTVfZ2VtX29iamVjdF9oYXNf
cGlubmVkX3BhZ2VzKGN1cl9vYmopKSB7Cj4gPiArCQkJCXN0cnVjdCBzZ190YWJsZSAqcGFnZXM7
Cj4gPiArCQkJCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwo+ID4gKwkJCQlzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSA9Cj4gPiArCQkJCQkmdmdwdS0+Z3Z0LT5kZXZfcHJpdi0+Z2d0dC52bTsK
PiA+ICsKPiA+ICsJCQkJcGFnZXMgPQo+IF9faTkxNV9nZW1fb2JqZWN0X3Vuc2V0X3BhZ2VzKGN1
cl9vYmopOwo+ID4gKwkJCQlpZiAoIUlTX0VSUihwYWdlcykpCj4gPiArCQkJCQljdXJfb2JqLT5v
cHMtPnB1dF9wYWdlcyhjdXJfb2JqLAo+IHBhZ2VzKTsKPiA+ICsJCQkJcmV0ID0gY3VyX29iai0+
b3BzLT5nZXRfcGFnZXMoY3VyX29iaik7Cj4gPiArCj4gPiArCQkJCXZtYSA9IGk5MTVfdm1hX2lu
c3RhbmNlKGN1cl9vYmosIHZtLCBOVUxMKTsKPiA+ICsJCQkJaWYgKElTX0VSUih2bWEpKQo+ID4g
KwkJCQkJZ290byBvdXQ7Cj4gPiArCj4gPiArCQkJCXZtYS0+b3BzLT5zZXRfcGFnZXModm1hKTsK
PiA+ICsKPiA+ICsJCQkJcmV0ID0gaTkxNV92bWFfYmluZCh2bWEsIHZtYS0+b2JqID8KPiA+ICsJ
CQkJCQkgICAgY3VyX29iai0+Y2FjaGVfbGV2ZWwgOiAwLAo+ID4gKwkJCQkJCSAgICBQSU5fVVBE
QVRFKTsKPiA+ICsJCQkJaWYgKHJldCkKPiA+ICsJCQkJCWdvdG8gb3V0Owo+ID4gKwkJCX0KPiA+
ICsJCX0KPiA+ICtmbGlwOgo+ID4gKwo+ID4gKwkJLyogNC4gQ29tbWl0IGRybV9mcmFtZWJ1ZmZl
ciAqLwo+ID4gKwkJcmV0ID0gZHJtX2F0b21pY19jb21taXQoc3RhdGUpOwo+ID4gKwkJaWYgKHBs
YW5lX3N0YXRlLT5mYiAhPSBwcmlfZmIpCj4gPiArCQkJZHJtX2ZyYW1lYnVmZmVyX3B1dChwcmlf
ZmIpOwo+ID4gKwkJaWYgKGN1cl9wbGFuZV9zdGF0ZSAmJiBjdXJfcGxhbmVfc3RhdGUtPmZiICE9
IGN1cl9mYikKPiA+ICsJCQlkcm1fZnJhbWVidWZmZXJfcHV0KGN1cl9mYik7Cj4gPiArCX0gZWxz
ZSB7Cj4gPiArCQlEUk1fREVCVUdfS01TKCJBc3NpZ25pbmcgc3ByaXRlIHBsYW5lIGhhc24ndCBi
ZWVuCj4gc3VwcG9ydGVkXG4iKTsKPiA+ICsJfQo+ID4gKwo+ID4gK291dDoKPiA+ICsJZHJtX2F0
b21pY19zdGF0ZV9wdXQoc3RhdGUpOwo+ID4gK2ZhaWw6Cj4gPiArCWlmIChyZXQgPT0gLUVERUFE
TEspIHsKPiA+ICsJICAgICAgIHJldCA9IGRybV9tb2Rlc2V0X2JhY2tvZmYoJmN0eCk7Cj4gPiAr
CSAgICAgICBpZiAoIXJldCkKPiA+ICsJCSAgICAgICBnb3RvIHJldHJ5Owo+ID4gKwl9Cj4gPiAr
Cj4gPiArCWRybV9tb2Rlc2V0X2Ryb3BfbG9ja3MoJmN0eCk7Cj4gPiArCWRybV9tb2Rlc2V0X2Fj
cXVpcmVfZmluaSgmY3R4KTsKPiA+ICsKPiA+ICsJcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArCj4g
PiAgI2RlZmluZSBEU1BTVVJGX1RPX1BJUEUob2Zmc2V0KSBcCj4gPiAgCWNhbGNfaW5kZXgob2Zm
c2V0LCBfRFNQQVNVUkYsIF9EU1BCU1VSRiwgMCwgRFNQU1VSRihQSVBFX0MpKQo+ID4KPiA+IEBA
IC03NTgsNiArMTA4OCw4IEBAIHN0YXRpYyBpbnQgcHJpX3N1cmZfbW1pb193cml0ZShzdHJ1Y3Qg
aW50ZWxfdmdwdQo+ID4gKnZncHUsIHVuc2lnbmVkIGludCBvZmZzZXQsCj4gPgo+ID4gIAl2Z3B1
X3ZyZWdfdCh2Z3B1LCBQSVBFX0ZMSVBDT1VOVF9HNFgocGlwZSkpKys7Cj4gPgo+ID4gKwloYW5k
bGVfdmdwdV9wYWdlX2ZsaXAodmdwdSwgcGlwZSwgUExBTkVfUFJJTUFSWSk7Cj4gPiArCj4gPiAg
CWlmICh2Z3B1X3ZyZWdfdCh2Z3B1LCBEU1BDTlRSKHBpcGUpKSAmIFBMQU5FX0NUTF9BU1lOQ19G
TElQKQo+ID4gIAkJaW50ZWxfdmdwdV90cmlnZ2VyX3ZpcnR1YWxfZXZlbnQodmdwdSwgZXZlbnQp
Owo+ID4gIAllbHNlCj4gPiAtLQo+ID4gMi43LjQKPiA+Cj4gPiBfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+ID4gaW50ZWwtZ3Z0LWRldiBtYWlsaW5nIGxp
c3QKPiA+IGludGVsLWd2dC1kZXZAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gPiBodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWd2dC1kZXYKPiAKPiAt
LQo+IE9wZW4gU291cmNlIFRlY2hub2xvZ3kgQ2VudGVyLCBJbnRlbCBsdGQuCj4gCj4gJGdwZyAt
LWtleXNlcnZlciB3d3drZXlzLnBncC5uZXQgLS1yZWN2LWtleXMgNEQ3ODE4MjcKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KaW50ZWwtZ3Z0LWRldiBtYWls
aW5nIGxpc3QKaW50ZWwtZ3Z0LWRldkBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1ndnQtZGV2
