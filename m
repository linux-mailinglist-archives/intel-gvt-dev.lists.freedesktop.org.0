Return-Path: <intel-gvt-dev-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gvt-dev@lfdr.de
Delivered-To: lists+intel-gvt-dev@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A437325C3
	for <lists+intel-gvt-dev@lfdr.de>; Mon,  3 Jun 2019 02:41:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2439289612;
	Mon,  3 Jun 2019 00:41:20 +0000 (UTC)
X-Original-To: intel-gvt-dev@lists.freedesktop.org
Delivered-To: intel-gvt-dev@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 16376897E0
 for <intel-gvt-dev@lists.freedesktop.org>;
 Mon,  3 Jun 2019 00:41:19 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Jun 2019 17:41:18 -0700
X-ExtLoop1: 1
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by FMSMGA003.fm.intel.com with ESMTP; 02 Jun 2019 17:41:18 -0700
Received: from fmsmsx113.amr.corp.intel.com (10.18.116.7) by
 FMSMSX103.amr.corp.intel.com (10.18.124.201) with Microsoft SMTP Server (TLS)
 id 14.3.408.0; Sun, 2 Jun 2019 17:41:18 -0700
Received: from shsmsx152.ccr.corp.intel.com (10.239.6.52) by
 FMSMSX113.amr.corp.intel.com (10.18.116.7) with Microsoft SMTP Server (TLS)
 id 14.3.408.0; Sun, 2 Jun 2019 17:41:17 -0700
Received: from shsmsx107.ccr.corp.intel.com ([169.254.9.98]) by
 SHSMSX152.ccr.corp.intel.com ([169.254.6.187]) with mapi id 14.03.0415.000;
 Mon, 3 Jun 2019 08:41:16 +0800
From: "Zhang, Xiaolin" <xiaolin.zhang@intel.com>
To: Zhenyu Wang <zhenyuw@linux.intel.com>
Subject: Re: [PATCH v5] drm/i915/gvt: save RING_HEAD into vreg when vgpu
 switched out
Thread-Topic: [PATCH v5] drm/i915/gvt: save RING_HEAD into vreg when vgpu
 switched out
Thread-Index: AQHVF3BBbCqqQd74lEatMRe9I6aAdQ==
Date: Mon, 3 Jun 2019 00:41:15 +0000
Message-ID: <073732E20AE4C540AE91DBC3F07D446087673AE8@SHSMSX107.ccr.corp.intel.com>
References: <1559279889-5741-1-git-send-email-xiaolin.zhang@intel.com>
 <20190531054223.GL3211@zhen-hp.sh.intel.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.239.4.160]
MIME-Version: 1.0
X-BeenThere: intel-gvt-dev@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: "Intel GVT \(Graphics Virtualization\) development list"
 <intel-gvt-dev.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gvt-dev>
List-Post: <mailto:intel-gvt-dev@lists.freedesktop.org>
List-Help: <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=subscribe>
Cc: "intel-gvt-dev@lists.freedesktop.org" <intel-gvt-dev@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gvt-dev-bounces@lists.freedesktop.org
Sender: "intel-gvt-dev" <intel-gvt-dev-bounces@lists.freedesktop.org>

T24gMDUvMzEvMjAxOSAwMTo0MyBQTSwgWmhlbnl1IFdhbmcgd3JvdGU6Cj4gT24gMjAxOS4wNS4z
MSAxMzoxODowOSArMDgwMCwgWGlhb2xpbiBaaGFuZyB3cm90ZToKPj4gU2F2ZSBSSU5HX0hFQUQg
aW50byB2Z3B1IHJlZyB3aGVuIHZncHUgc3dpdGNoZWQgb3V0IGFuZCByZXBvcnQKPj4gaXQncyB2
YWx1ZSBiYWNrIHRvIGd1ZXN0Lgo+Pgo+PiB2NTogcmluZyBoZWFkIHdyYXAgY291bnQgc3VwcG9y
dC4KPj4gdjQ6IHVwZGF0ZWQgSEVBRC9UQUlMIHdpdGggZ3Vlc3QgdmFsdWUsIG5vdCBob3N0IHZh
bHVlLiAoWWFuIFpoYW8pCj4+IHYzOiBzYXZlIFJJTkcgSEVBRC9UQUlMIHZncHUgcmVnIGluIHNh
dmVfcmluZ19od19zdGF0ZS4gKFpoZW55dSBXYW5nKQo+PiB2Mjogc2F2ZSBSSU5HX1RBSUwgYXMg
d2VsbCBkdXJpbmcgdmdwdSBtbWlvIHN3aXRjaCB0byBtZWV0IHJpbmdfaXNfaWRsZQo+PiBjb25k
aXRpb24uIChGcmVkIEdhbykKPj4gdjE6IGJhc2VkIG9uIGlucHV0IGZyb20gV2VpbmFuLiAoV2Vp
bmFuIExpKQo+Pgo+PiBbemhlbnl1dzogSW5jbHVkZSB0aGlzIGZpeCBmb3IgcG9zc2libGUgZnV0
dXJlIGd1ZXN0IGtlcm5lbCB0aGF0Cj4+IHdvdWxkIHV0aWxpemUgUklOR19IRUFEIGZvciBoYW5n
Y2hlY2suXQo+Pgo+PiBSZXZpZXdlZC1ieTogWmhlbnl1IFdhbmcgPHpoZW55dXdAbGludXguaW50
ZWwuY29tPgo+PiBTaWduZWQtb2ZmLWJ5OiBYaWFvbGluIFpoYW5nIDx4aWFvbGluLnpoYW5nQGlu
dGVsLmNvbT4KPj4gU2lnbmVkLW9mZi1ieTogWmhlbnl1IFdhbmcgPHpoZW55dXdAbGludXguaW50
ZWwuY29tPgo+PiAtLS0KPj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9yZWcuaCAgICAgICB8
ICAzICsrKwo+PiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jIHwgMjggKysr
KysrKysrKysrKysrKysrKysrKysrKysrKwo+PiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L3Nj
aGVkdWxlci5oIHwgIDEgKwo+PiAgMyBmaWxlcyBjaGFuZ2VkLCAzMiBpbnNlcnRpb25zKCspCj4+
Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvcmVnLmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndnQvcmVnLmgKPj4gaW5kZXggMzNhYWExNC4uYjIxMGU5YSAxMDA2NDQK
Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L3JlZy5oCj4+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d2dC9yZWcuaAo+PiBAQCAtMTAyLDYgKzEwMiw5IEBACj4+ICAjZGVmaW5l
IEZPUkNFV0FLRV9BQ0tfTUVESUFfR0VOOV9SRUcgMHgwRDg4Cj4+ICAjZGVmaW5lIEZPUkNFV0FL
RV9BQ0tfSFNXX1JFRyAweDEzMDA0NAo+PiAgCj4+ICsjZGVmaW5lIFJCX0hFQURfV1JBUF9DTlRf
TUFYCSgoMSA8PCAxMSkgLSAxKQo+PiArI2RlZmluZSBSQl9IRUFEX1dSQVBfQ05UX09GRgkyMQo+
PiArI2RlZmluZSBSQl9IRUFEX1dSQVBfQ05UX01BU0sJKDB4RkZFMDAwMDApCj4+ICAjZGVmaW5l
IFJCX0hFQURfT0ZGX01BU0sJKCgxVSA8PCAyMSkgLSAoMVUgPDwgMikpCj4+ICAjZGVmaW5lIFJC
X1RBSUxfT0ZGX01BU0sJKCgxVSA8PCAyMSkgLSAoMVUgPDwgMykpCj4+ICAjZGVmaW5lIFJCX1RB
SUxfU0laRV9NQVNLCSgoMVUgPDwgMjEpIC0gKDFVIDw8IDEyKSkKPj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9zY2hlZHVsZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d2dC9zY2hlZHVsZXIuYwo+PiBpbmRleCAzODg5N2QyLi5lNjUyM2U4IDEwMDY0NAo+PiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmMKPj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jCj4+IEBAIC03OTMsMTAgKzc5MywzNCBAQCBzdGF0
aWMgdm9pZCB1cGRhdGVfZ3Vlc3RfY29udGV4dChzdHJ1Y3QgaW50ZWxfdmdwdV93b3JrbG9hZCAq
d29ya2xvYWQpCj4+ICAJdm9pZCAqc3JjOwo+PiAgCXVuc2lnbmVkIGxvbmcgY29udGV4dF9ncGEs
IGNvbnRleHRfcGFnZV9udW07Cj4+ICAJaW50IGk7Cj4+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gZ3Z0LT5kZXZfcHJpdjsKPj4gKwlpOTE1X3JlZ190IHJlZzsKPj4gKwl1
MzIgcmluZ19iYXNlOwo+PiArCXUzMiBoZWFkLCB0YWlsOwo+PiArCXUxNiB3cmFwX2NvdW50Owo+
PiAgCj4+ICAJZ3Z0X2RiZ19zY2hlZCgicmluZyBpZCAlZCB3b3JrbG9hZCBscmNhICV4XG4iLCBy
cS0+ZW5naW5lLT5pZCwKPj4gIAkJICAgICAgd29ya2xvYWQtPmN0eF9kZXNjLmxyY2EpOwo+PiAg
Cj4+ICsJaGVhZCA9IHdvcmtsb2FkLT5yYl9oZWFkOwo+PiArCXRhaWwgPSB3b3JrbG9hZC0+cmJf
dGFpbDsKPj4gKwl3cmFwX2NvdW50ID0gd29ya2xvYWQtPmd1ZXN0X3JiX2hlYWQgJiBSQl9IRUFE
X1dSQVBfQ05UX01BU0s7Cj4+ICsKPiBMb29rcyBtaXNzZWQgdGhlIHNoaWZ0IGZvciByZWFsIGNv
dW50ZXIgaGVyZS4KSW5kZWVkLiBnb29kIGNhdGNoLgo+Cj4+ICsJaWYgKHRhaWwgPCBoZWFkKSB7
Cj4+ICsJCWlmICh3cmFwX2NvdW50ID09IFJCX0hFQURfV1JBUF9DTlRfTUFYKQo+PiArCQkJd3Jh
cF9jb3VudCA9IDA7Cj4+ICsJCWVsc2UKPj4gKwkJCXdyYXBfY291bnQgKz0gMTsKPj4gKwl9Cj4+
ICsKPj4gKwloZWFkID0gKHdyYXBfY291bnQgPDwgUkJfSEVBRF9XUkFQX0NOVF9PRkYpIHwgdGFp
bDsKPj4gKwo+PiArCXJpbmdfYmFzZSA9IGRldl9wcml2LT5lbmdpbmVbd29ya2xvYWQtPnJpbmdf
aWRdLT5tbWlvX2Jhc2U7Cj4+ICsJcmVnID0gUklOR19UQUlMKHJpbmdfYmFzZSk7Cj4+ICsJdmdw
dV92cmVnKHZncHUsIGk5MTVfbW1pb19yZWdfb2Zmc2V0KHJlZykpID0gdGFpbDsKPj4gKwlyZWcg
PSBSSU5HX0hFQUQocmluZ19iYXNlKTsKPj4gKwl2Z3B1X3ZyZWcodmdwdSwgaTkxNV9tbWlvX3Jl
Z19vZmZzZXQocmVnKSkgPSBoZWFkOwo+PiArCj4gQ2FuIHdyaXRlIGFzCj4KPiAgICAgICAgIHZn
cHVfdnJlZ190KHZncHUsIFJJTkdfVEFJTChyaW5nX2Jhc2UpKSA9IHRhaWw7Cj4gICAgICAgICB2
Z3B1X3ZyZWdfdCh2Z3B1LCBSSU5HX0hFQUQocmluZ19iYXNlKSkgPSBoZWFkOwpTdXJlLiAgaXQg
aXMgbW9yZSBjbGVhci4KPgo+Cj4+ICAJY29udGV4dF9wYWdlX251bSA9IHJxLT5lbmdpbmUtPmNv
bnRleHRfc2l6ZTsKPj4gIAljb250ZXh0X3BhZ2VfbnVtID0gY29udGV4dF9wYWdlX251bSA+PiBQ
QUdFX1NISUZUOwo+PiAgCj4+IEBAIC0xNDE4LDYgKzE0NDIsNyBAQCBpbnRlbF92Z3B1X2NyZWF0
ZV93b3JrbG9hZChzdHJ1Y3QgaW50ZWxfdmdwdSAqdmdwdSwgaW50IHJpbmdfaWQsCj4+ICAJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdmdwdS0+Z3Z0LT5kZXZfcHJpdjsKPj4g
IAl1NjQgcmluZ19jb250ZXh0X2dwYTsKPj4gIAl1MzIgaGVhZCwgdGFpbCwgc3RhcnQsIGN0bCwg
Y3R4X2N0bCwgcGVyX2N0eCwgaW5kaXJlY3RfY3R4Owo+PiArCXUzMiBndWVzdF9oZWFkOwo+PiAg
CWludCByZXQ7Cj4+ICAKPj4gIAlyaW5nX2NvbnRleHRfZ3BhID0gaW50ZWxfdmdwdV9nbWFfdG9f
Z3BhKHZncHUtPmd0dC5nZ3R0X21tLAo+PiBAQCAtMTQzMyw2ICsxNDU4LDggQEAgaW50ZWxfdmdw
dV9jcmVhdGVfd29ya2xvYWQoc3RydWN0IGludGVsX3ZncHUgKnZncHUsIGludCByaW5nX2lkLAo+
PiAgCWludGVsX2d2dF9oeXBlcnZpc29yX3JlYWRfZ3BhKHZncHUsIHJpbmdfY29udGV4dF9ncGEg
Kwo+PiAgCQkJUklOR19DVFhfT0ZGKHJpbmdfdGFpbC52YWwpLCAmdGFpbCwgNCk7Cj4+ICAKPj4g
KwlndWVzdF9oZWFkID0gaGVhZDsKPj4gKwo+PiAgCWhlYWQgJj0gUkJfSEVBRF9PRkZfTUFTSzsK
Pj4gIAl0YWlsICY9IFJCX1RBSUxfT0ZGX01BU0s7Cj4+ICAKPj4gQEAgLTE0NjUsNiArMTQ5Miw3
IEBAIGludGVsX3ZncHVfY3JlYXRlX3dvcmtsb2FkKHN0cnVjdCBpbnRlbF92Z3B1ICp2Z3B1LCBp
bnQgcmluZ19pZCwKPj4gIAl3b3JrbG9hZC0+Y3R4X2Rlc2MgPSAqZGVzYzsKPj4gIAl3b3JrbG9h
ZC0+cmluZ19jb250ZXh0X2dwYSA9IHJpbmdfY29udGV4dF9ncGE7Cj4+ICAJd29ya2xvYWQtPnJi
X2hlYWQgPSBoZWFkOwo+PiArCXdvcmtsb2FkLT5ndWVzdF9yYl9oZWFkID0gZ3Vlc3RfaGVhZDsK
Pj4gIAl3b3JrbG9hZC0+cmJfdGFpbCA9IHRhaWw7Cj4+ICAJd29ya2xvYWQtPnJiX3N0YXJ0ID0g
c3RhcnQ7Cj4+ICAJd29ya2xvYWQtPnJiX2N0bCA9IGN0bDsKPj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d2dC9zY2hlZHVsZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2
dC9zY2hlZHVsZXIuaAo+PiBpbmRleCA5MGM2NzU2Li5jNTBkMTRhIDEwMDY0NAo+PiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmgKPj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5oCj4+IEBAIC0xMDAsNiArMTAwLDcgQEAgc3RydWN0IGlu
dGVsX3ZncHVfd29ya2xvYWQgewo+PiAgCXN0cnVjdCBleGVjbGlzdF9jdHhfZGVzY3JpcHRvcl9m
b3JtYXQgY3R4X2Rlc2M7Cj4+ICAJc3RydWN0IGV4ZWNsaXN0X3JpbmdfY29udGV4dCAqcmluZ19j
b250ZXh0Owo+PiAgCXVuc2lnbmVkIGxvbmcgcmJfaGVhZCwgcmJfdGFpbCwgcmJfY3RsLCByYl9z
dGFydCwgcmJfbGVuOwo+PiArCXVuc2lnbmVkIGxvbmcgZ3Vlc3RfcmJfaGVhZDsKPj4gIAlib29s
IHJlc3RvcmVfaW5oaWJpdDsKPj4gIAlzdHJ1Y3QgaW50ZWxfdmdwdV9lbHNwX2R3b3JkcyBlbHNw
X2R3b3JkczsKPj4gIAlib29sIGVtdWxhdGVfc2NoZWR1bGVfaW47Cj4+IC0tIAo+PiAyLjcuNAo+
PgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KaW50ZWwt
Z3Z0LWRldiBtYWlsaW5nIGxpc3QKaW50ZWwtZ3Z0LWRldkBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1ndnQt
ZGV2
