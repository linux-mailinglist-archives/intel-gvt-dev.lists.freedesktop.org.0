Return-Path: <intel-gvt-dev-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gvt-dev@lfdr.de
Delivered-To: lists+intel-gvt-dev@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 75BED1577E
	for <lists+intel-gvt-dev@lfdr.de>; Tue,  7 May 2019 04:12:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1754889C6C;
	Tue,  7 May 2019 02:12:50 +0000 (UTC)
X-Original-To: intel-gvt-dev@lists.freedesktop.org
Delivered-To: intel-gvt-dev@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C44B89C6C
 for <intel-gvt-dev@lists.freedesktop.org>;
 Tue,  7 May 2019 02:12:49 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 May 2019 19:12:48 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.60,440,1549958400"; d="scan'208";a="140759911"
Received: from joy-optiplex-7040.sh.intel.com (HELO joy-OptiPlex-7040)
 ([10.239.13.9])
 by orsmga008.jf.intel.com with ESMTP; 06 May 2019 19:12:47 -0700
Date: Mon, 6 May 2019 22:07:10 -0400
From: Yan Zhao <yan.y.zhao@intel.com>
To: "Li, Weinan Z" <weinan.z.li@intel.com>
Subject: Re: [PATCH v3 1/4] drm/i915/gvt: use cmd to restore in-context mmios
 to hw for gen9 platform
Message-ID: <20190507020710.GA6791@joy-OptiPlex-7040>
References: <20190429081309.15428-1-yan.y.zhao@intel.com>
 <9BD218709B5F2A4F96F08B4A3B98A897733F29CA@SHSMSX101.ccr.corp.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <9BD218709B5F2A4F96F08B4A3B98A897733F29CA@SHSMSX101.ccr.corp.intel.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
X-BeenThere: intel-gvt-dev@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: "Intel GVT \(Graphics Virtualization\) development list"
 <intel-gvt-dev.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gvt-dev>
List-Post: <mailto:intel-gvt-dev@lists.freedesktop.org>
List-Help: <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=subscribe>
Reply-To: Yan Zhao <yan.y.zhao@intel.com>
Cc: "intel-gvt-dev@lists.freedesktop.org" <intel-gvt-dev@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gvt-dev-bounces@lists.freedesktop.org
Sender: "intel-gvt-dev" <intel-gvt-dev-bounces@lists.freedesktop.org>

T24gTW9uLCBBcHIgMjksIDIwMTkgYXQgMDQ6Mzg6NTlQTSArMDgwMCwgTGksIFdlaW5hbiBaIHdy
b3RlOgo+ID4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0KPiA+IEZyb206IFpoYW8sIFlhbiBZ
Cj4gPiBTZW50OiBNb25kYXksIEFwcmlsIDI5LCAyMDE5IDQ6MTMgUE0KPiA+IFRvOiBpbnRlbC1n
dnQtZGV2QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+ID4gQ2M6IFpoYW8sIFlhbiBZIDx5YW4ueS56
aGFvQGludGVsLmNvbT47IExpLCBXZWluYW4gWiA8d2VpbmFuLnoubGlAaW50ZWwuY29tPgo+ID4g
U3ViamVjdDogW1BBVENIIHYzIDEvNF0gZHJtL2k5MTUvZ3Z0OiB1c2UgY21kIHRvIHJlc3RvcmUg
aW4tY29udGV4dCBtbWlvcwo+ID4gdG8gaHcgZm9yIGdlbjkgcGxhdGZvcm0KPiA+IAo+ID4gZm9y
IHJlc3RvcmUtaW5oaWJpdCBjb250ZXh0LCBoYXJkd2FyZSB3aWxsIG5vdCBsb2FkIGluLWNvbnRl
eHQgbW1pb3MgKGVuZ2luZQo+ID4gY29udGV4dCBwYXJ0KSB0byBoYXJkd2FyZSwgYnV0IGhhcmR3
YXJlIHdpbGwgc2F2ZSB0aGUgbW1pbyB2YWx1ZXMgaW4KPiA+IGhhcmR3YXJlIGJhY2sgdG8gY29u
dGV4dCBpbWFnZS4gU28sIGluIG9yZGVyIHRvIHNhdmUgY29ycmVjdCB2YWx1ZXMgb2YgdkdQVQo+
ID4gYmFjayB0byBjb250ZXh0IGltYWdlLCB2YWx1ZXMgb2YgdkdQVSBtbWlvcyBoYXZlIHRvIGJl
IGxvYWRlZCBpbnRvCj4gPiBoYXJkd2FyZSBmaXJzdCBmb3IgcmVzdG9yZS1pbmhpYml0IGNvbnRl
eHQuCj4gPiAKPiA+IEluIHRoaXMgcGF0Y2gsIHRoZSBtZWNoYW5pc20gaXMgYXBwbGllZCB0byBh
bGwgZ2VuOSBwbGF0Zm9ybS4KPiA+IAo+ID4gVGhlIHJlYXNvbiBleGNsdWRpbmcgZ2VuOCBwbGF0
Zm9ybXMgaXMgb25seSBiZWNhdXNlIG9mIGxhY2tpbmcgb2YgdGVzdGluZyBvbgo+ID4gdGhvc2Ug
cGxhdGZvcm1zLgo+ID4gCj4gPiB2MjogdXBkYXRlIHZyZWcgd2hlbiBzY2FubmluZyBpbmRpcmVj
dCBjb250ZXh0IGZvciBpbmhpYml0IGNvbnRleHQgZm9yCj4gPiBnZW45Cj4gPiAKPiA+IENjOiBX
ZWluYW4gTGkgPHdlaW5hbi56LmxpQGludGVsLmNvbT4KPiA+IFNpZ25lZC1vZmYtYnk6IFlhbiBa
aGFvIDx5YW4ueS56aGFvQGludGVsLmNvbT4KPiA+IC0tLQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d2dC9jbWRfcGFyc2VyLmMgICB8IDE0ICsrKysrKysrKy0tLS0tCj4gPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Z0L21taW9fY29udGV4dC5jIHwgIDUgKystLS0KPiA+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmMgICAgfCAgNCArLS0tCj4gPiAgMyBmaWxlcyBjaGFu
Z2VkLCAxMiBpbnNlcnRpb25zKCspLCAxMSBkZWxldGlvbnMoLSkKPiA+IAo+ID4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9jbWRfcGFyc2VyLmMKPiA+IGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Z0L2NtZF9wYXJzZXIuYwo+ID4gaW5kZXggYWIwMDJjZmQzY2FiLi41Y2I1
OWMwYjRiYmUgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvY21kX3Bh
cnNlci5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvY21kX3BhcnNlci5jCj4g
PiBAQCAtODk2LDEyICs4OTYsMTYgQEAgc3RhdGljIGludCBjbWRfcmVnX2hhbmRsZXIoc3RydWN0
Cj4gPiBwYXJzZXJfZXhlY19zdGF0ZSAqcywKPiA+ICAJfQo+ID4gCj4gPiAgCS8qIFRPRE8KPiA+
IC0JICogUmlnaHQgbm93IG9ubHkgc2NhbiBMUkkgY29tbWFuZCBvbiBLQkwgYW5kIGluIGluaGli
aXQgY29udGV4dC4KPiA+IC0JICogSXQncyBnb29kIGVub3VnaCB0byBzdXBwb3J0IGluaXRpYWxp
emluZyBtbWlvIGJ5IGxyaSBjb21tYW5kIGluCj4gPiAtCSAqIHZncHUgaW5oaWJpdCBjb250ZXh0
IG9uIEtCTC4KPiA+ICsJICogSW4gb3JkZXIgdG8gbGV0IHdvcmtsb2FkIHdpdGggaW5oaWJpdCBj
b250ZXh0IHRvIGdlbmVyYXRlCj4gPiArCSAqIGNvcnJlY3QgaW1hZ2UgZGF0YSBpbnRvIG1lbW9y
eSwgdnJlZ3MgdmFsdWVzIHdpbGwgYmUgbG9hZGVkIHRvCj4gPiArCSAqIGh3IHZpYSBMUklzIGlu
IHRoZSB3b3JrbG9hZCB3aXRoIGluaGliaXQgY29udGV4dC4gQnV0IGFzCj4gPiArCSAqIGluZGly
ZWN0IGNvbnRleHQgaXMgbG9hZGVkIHByaW9yIHRvIExSSXMgaW4gd29ya2xvYWQsIHdlIGRvbid0
Cj4gPiArCSAqIHdhbnQgcmVnIHZhbHVlcyBzcGVjaWZpZWQgaW4gaW5kaXJlY3QgY29udGV4dCBv
dmVyd3JpdHRlbiBieQo+ID4gKwkgKiBMUklzIGluIHdvcmtsb2Fkcy4gU28sIHdoZW4gc2Nhbm5p
bmcgYW4gaW5kaXJlY3QgY29udGV4dCwgd2UKPiA+ICsJICogdXBkYXRlIHJlZyB2YWx1ZXMgaW4g
aXQgaW50byB2cmVncywgc28gTFJJcyBpbiB3b3JrbG9hZCB3aXRoCj4gPiArCSAqIGluaGliaXQg
Y29udGV4dCB3aWxsIHJlc3RvcmUgd2l0aCBjb3JyZWN0IHZhbHVlcwo+ID4gIAkgKi8KPiA+IC0J
aWYgKChJU19LQUJZTEFLRShzLT52Z3B1LT5ndnQtPmRldl9wcml2KQo+ID4gLQkJfHwgSVNfQ09G
RkVFTEFLRShzLT52Z3B1LT5ndnQtPmRldl9wcml2KSkgJiYKPiA+ICsJaWYgKElTX0dFTihndnQt
PmRldl9wcml2LCA5KSAmJgo+ID4gIAkJCWludGVsX2d2dF9tbWlvX2lzX2luX2N0eChndnQsIG9m
ZnNldCkgJiYKPiA+ICAJCQkhc3RybmNtcChjbWQsICJscmkiLCAzKSkgewo+ID4gIAkJaW50ZWxf
Z3Z0X2h5cGVydmlzb3JfcmVhZF9ncGEocy0+dmdwdSwKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndnQvbW1pb19jb250ZXh0LmMKPiA+IGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Z0L21taW9fY29udGV4dC5jCj4gPiBpbmRleCBlN2UxNGM4NDJiZTQuLmE1MWM1MWIyYzgy
ZSAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9tbWlvX2NvbnRleHQu
Ywo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L21taW9fY29udGV4dC5jCj4gPiBA
QCAtNDY5LDExICs0NjksMTAgQEAgc3RhdGljIHZvaWQgc3dpdGNoX21taW8oc3RydWN0IGludGVs
X3ZncHUgKnByZSwKPiA+ICAJCQljb250aW51ZTsKPiA+ICAJCS8qCj4gPiAgCQkgKiBObyBuZWVk
IHRvIGRvIHNhdmUgb3IgcmVzdG9yZSBvZiB0aGUgbW1pbyB3aGljaCBpcyBpbiBjb250ZXh0Cj4g
PiAtCQkgKiBzdGF0ZSBpbWFnZSBvbiBrYWJ5bGFrZSwgaXQncyBpbml0aWFsaXplZCBieSBscmkg
Y29tbWFuZCBhbmQKPiA+ICsJCSAqIHN0YXRlIGltYWdlIG9uIGdlbjksIGl0J3MgaW5pdGlhbGl6
ZWQgYnkgbHJpIGNvbW1hbmQgYW5kCj4gPiAgCQkgKiBzYXZlIG9yIHJlc3RvcmUgd2l0aCBjb250
ZXh0IHRvZ2V0aGVyLgo+ID4gIAkJICovCj4gPiAtCQlpZiAoKElTX0tBQllMQUtFKGRldl9wcml2
KSB8fCBJU19CUk9YVE9OKGRldl9wcml2KQo+ID4gLQkJCXx8IElTX0NPRkZFRUxBS0UoZGV2X3By
aXYpKSAmJiBtbWlvLT5pbl9jb250ZXh0KQo+ID4gKwkJaWYgKElTX0dFTihkZXZfcHJpdiwgOSkg
JiYgbW1pby0+aW5fY29udGV4dCkKPiA+ICAJCQljb250aW51ZTsKPiA+IAo+ID4gIAkJLy8gc2F2
ZQo+IAo+IEBAIC0zOTIsOSArMzkyLDcgQEAgc3RhdGljIHZvaWQgc3dpdGNoX21vY3Moc3RydWN0
IGludGVsX3ZncHUgKnByZSwgc3RydWN0IGludGVsX3ZncHUgKm5leHQsCj4gICAgICAgICAgICAg
ICAgIHJldHVybjsKPiAKPiAgICAgICAgIGlmIChyaW5nX2lkID09IFJDUzAgJiYKPiAtICAgICAg
ICAgICAoSVNfS0FCWUxBS0UoZGV2X3ByaXYpIHx8Cj4gLSAgICAgICAgICAgIElTX0JST1hUT04o
ZGV2X3ByaXYpIHx8Cj4gLSAgICAgICAgICAgIElTX0NPRkZFRUxBS0UoZGV2X3ByaXYpKSkKPiAr
ICAgICAgICAgICBJU19HRU4oZGV2X3ByaXYsIDkpKQo+ICAgICAgICAgICAgICAgICByZXR1cm47
Cj4gd2UgY2FuIGlnbm9yZSB0aGUgTU9DUyBzYXZlL3Jlc3RvcmUgaWYgaXQncyBSQ1MsIHNpbmNl
IGl0J3MgaW4gY29udGV4dCBNTUlPLgo+ClRoYW5rcyBmb3IgdGhpcyBmaW5kaW5nLiBJJ2xsIHVw
ZGF0ZSBpdCA6KQoKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2No
ZWR1bGVyLmMKPiA+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jCj4gPiBp
bmRleCA4OTk4ZmE1YWIxOTguLjFmM2JhOGVmYjk5NCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d2dC9zY2hlZHVsZXIuYwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Z0L3NjaGVkdWxlci5jCj4gPiBAQCAtMjk5LDkgKzI5OSw3IEBAIHN0YXRpYyBpbnQgY29w
eV93b3JrbG9hZF90b19yaW5nX2J1ZmZlcihzdHJ1Y3QKPiA+IGludGVsX3ZncHVfd29ya2xvYWQg
Kndvcmtsb2FkKQo+ID4gIAl2b2lkICpzaGFkb3dfcmluZ19idWZmZXJfdmE7Cj4gPiAgCXUzMiAq
Y3M7Cj4gPiAKPiA+IC0JaWYgKChJU19LQUJZTEFLRShyZXEtPmk5MTUpIHx8IElTX0JST1hUT04o
cmVxLT5pOTE1KQo+ID4gLQkJfHwgSVNfQ09GRkVFTEFLRShyZXEtPmk5MTUpKQo+ID4gLQkJJiYg
aXNfaW5oaWJpdF9jb250ZXh0KHJlcS0+aHdfY29udGV4dCkpCj4gPiArCWlmIChJU19HRU4ocmVx
LT5pOTE1LCA5KSAmJiBpc19pbmhpYml0X2NvbnRleHQocmVxLT5od19jb250ZXh0KSkKPiA+ICAJ
CWludGVsX3ZncHVfcmVzdG9yZV9pbmhpYml0X2NvbnRleHQodmdwdSwgcmVxKTsKPiA+IAo+ID4g
IAkvKiBhbGxvY2F0ZSBzaGFkb3cgcmluZyBidWZmZXIgKi8KPiA+IC0tCj4gPiAyLjE3LjEKPiAK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KaW50ZWwtZ3Z0
LWRldiBtYWlsaW5nIGxpc3QKaW50ZWwtZ3Z0LWRldkBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1ndnQtZGV2
