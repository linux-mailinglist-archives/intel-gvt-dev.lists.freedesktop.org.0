Return-Path: <intel-gvt-dev-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gvt-dev@lfdr.de
Delivered-To: lists+intel-gvt-dev@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 09CE9786D2
	for <lists+intel-gvt-dev@lfdr.de>; Mon, 29 Jul 2019 09:59:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A617289CFA;
	Mon, 29 Jul 2019 07:59:08 +0000 (UTC)
X-Original-To: intel-gvt-dev@lists.freedesktop.org
Delivered-To: intel-gvt-dev@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BA0B589996;
 Mon, 29 Jul 2019 07:59:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Jul 2019 00:57:38 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,322,1559545200"; d="scan'208";a="255150031"
Received: from vca-bj102.bj.intel.com ([10.240.193.76])
 by orsmga001.jf.intel.com with ESMTP; 29 Jul 2019 00:57:36 -0700
From: Xiaolin Zhang <xiaolin.zhang@intel.com>
To: intel-gvt-dev@lists.freedesktop.org,
	intel-gfx@lists.freedesktop.org
Subject: [PATCH v9 1/9] drm/i915: introduced vgpu pv capability
Date: Tue, 30 Jul 2019 00:32:34 +0800
Message-Id: <1564417962-74325-2-git-send-email-xiaolin.zhang@intel.com>
X-Mailer: git-send-email 1.8.3.1
In-Reply-To: <1564417962-74325-1-git-send-email-xiaolin.zhang@intel.com>
References: <1564417962-74325-1-git-send-email-xiaolin.zhang@intel.com>
X-BeenThere: intel-gvt-dev@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: "Intel GVT \(Graphics Virtualization\) development list"
 <intel-gvt-dev.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gvt-dev>
List-Post: <mailto:intel-gvt-dev@lists.freedesktop.org>
List-Help: <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=subscribe>
Cc: Xiaolin Zhang <xiaolin.zhang@intel.com>, zhenyu.z.wang@intel.com,
 joonas.lahtinen@linux.intel.com, hang.yuan@intel.com, min.he@intel.com,
 zhiyuan.lv@intel.com, chris@chris-wilson.co.uk, zhi.a.wang@intel.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gvt-dev-bounces@lists.freedesktop.org
Sender: "intel-gvt-dev" <intel-gvt-dev-bounces@lists.freedesktop.org>

cHYgY2FwYWJpbGl0eSBmb3IgdmdwdSB3YXMgaW50cm9kdWNlZCBieSBwdl9jYXBzIGluIHN0cnVj
dAppOTE1X3ZpcnR1YWxfZ3B1IGFuZCBhIG5ldyBwdl9jYXBzIHJlZ2lzdGVyIGZvciBob3N0IEdW
VAp3YXMgZGVmaW5lZCBpbiBzdHJ1Y3Qgdmd0X2lmIGZvciB2Z3B1IHB2IG9wdGltaXphdGlvbi4K
CmJvdGggb2YgdGhlbSBhcmUgdXNlZCB0byBjb250cm9sIGRpZmZlcmVudCBmZWF0dXJlIHB2IG9w
dGltaXphdGlvbgpzdXBwb3J0ZWQgYW5kIGltcGxlbWVudGVkIGJ5IGJvdGggZ3Vlc3QgYW5kIGhv
c3QuCgpUaGVzZSBmaWVsZHMgYXJlIGRlZmF1bHQgemVybywgbm8gYW55IHB2IGZlYXR1cmUgZW5h
YmxlZC4KCml0IGFsc28gYWRkcyBWR1RfQ0FQU19QViBjYXBhYmlsaXR5IEJJVCBmb3IgZ3Vlc3Qg
dG8gY2hlY2sgR1ZUZwpjYW4gc3VwcG9ydCBQViBmZWF0dXJlIG9yIG5vdC4KCnYwOiBSRkMsIGlu
dHJvdWRjZWQgZW5hYmxlX3B2bW1pbyBtb2R1bGUgcGFyYW1ldGVyLgp2MTogYWRkcmVzc2VkIFJG
QyBjb21tZW50IHRvIHJlbW92ZSBlbmFibGVfcHZtbWlvIG1vZHVsZSBwYXJhbWV0ZXIKYnkgcHYg
Y2FwYWJpbGl0eSBjaGVjay4KdjI6IHJlYmFzZS4KdjM6IGRpc3RpbmN0IHB2IGNhcHMgZnJvbSBn
dWVzdCBhbmQgaG9zdC4gcmVuYW1lZCBlbmFibGVfcHZtbWlvIHRvCnB2bW1pb19jYXBzIHdoaWNo
IGlzIHVzZWQgZm9yIGhvc3QgcHYgY2Fwcy4KdjQ6IGNvbnNvbGlkYXRlZCBhbGwgcHYgcmVsYXRl
ZCBmdW5jdG9ucyBpbnRvIGEgc2luZ2xlIGZpbGUgaTkxNV92Z3B1LmMKYW5kIHJlbmFtZWQgcHZt
bWlvIHRvIHB2X2NhcHMuCnY1OiByZWZpbmVkIFBWIHVzZXItZmFjaW5nIG1lc3NhZ2UgYW5kIHBy
aW50IHB2X2NhcHMgdW5kZXIgZGVidWdmcy4KClNpZ25lZC1vZmYtYnk6IFhpYW9saW4gWmhhbmcg
PHhpYW9saW4uemhhbmdAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZGVidWdmcy5jIHwgIDIgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgIHwg
IDIgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHZpbmZvLmggIHwgIDUgKysrKy0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5jICAgIHwgNDMgKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmggICAg
fCAgOSArKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCA1OSBpbnNlcnRpb25zKCspLCAyIGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggMjQ3ODdiYi4uM2I1
MDU3NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKQEAgLTYzLDYgKzYzLDggQEAg
c3RhdGljIGludCBpOTE1X2NhcGFiaWxpdGllcyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRh
dGEpCiAJc2VxX3ByaW50ZihtLCAiZ2VuOiAlZFxuIiwgSU5URUxfR0VOKGRldl9wcml2KSk7CiAJ
c2VxX3ByaW50ZihtLCAicGxhdGZvcm06ICVzXG4iLCBpbnRlbF9wbGF0Zm9ybV9uYW1lKGluZm8t
PnBsYXRmb3JtKSk7CiAJc2VxX3ByaW50ZihtLCAicGNoOiAlZFxuIiwgSU5URUxfUENIX1RZUEUo
ZGV2X3ByaXYpKTsKKwlpZiAoaW50ZWxfdmdwdV9hY3RpdmUoZGV2X3ByaXYpKQorCQlzZXFfcHJp
bnRmKG0sICJ2Z3B1IHB2X2NhcHM6IDB4JXhcbiIsIGRldl9wcml2LT52Z3B1LnB2X2NhcHMpOwog
CiAJaW50ZWxfZGV2aWNlX2luZm9fZHVtcF9mbGFncyhpbmZvLCAmcCk7CiAJaW50ZWxfZGV2aWNl
X2luZm9fZHVtcF9ydW50aW1lKFJVTlRJTUVfSU5GTyhkZXZfcHJpdiksICZwKTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oCmluZGV4IDU5ZDRhMTEuLjNhZTkwZWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtOTMsNiArOTMsNyBAQAogI2luY2x1ZGUgImk5MTVfdm1hLmgiCiAKICNpbmNsdWRl
ICJpbnRlbF9ndnQuaCIKKyNpbmNsdWRlICJpOTE1X3B2aW5mby5oIgogCiAvKiBHZW5lcmFsIGN1
c3RvbWl6YXRpb246CiAgKi8KQEAgLTEwNzgsNiArMTA3OSw3IEBAIHN0cnVjdCBpOTE1X2Zyb250
YnVmZmVyX3RyYWNraW5nIHsKIHN0cnVjdCBpOTE1X3ZpcnR1YWxfZ3B1IHsKIAlib29sIGFjdGl2
ZTsKIAl1MzIgY2FwczsKKwl1MzIgcHZfY2FwczsKIH07CiAKIC8qIHVzZWQgaW4gY29tcHV0aW5n
IHRoZSBuZXcgd2F0ZXJtYXJrcyBzdGF0ZSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9wdmluZm8uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHZpbmZvLmgK
aW5kZXggNjgzZTk3YS4uYWQzOThiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wdmluZm8uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3B2aW5mby5oCkBA
IC01Nyw2ICs1Nyw3IEBAIGVudW0gdmd0X2cydl90eXBlIHsKICNkZWZpbmUgVkdUX0NBUFNfRlVM
TF9QUEdUVAkJQklUKDIpCiAjZGVmaW5lIFZHVF9DQVBTX0hXU1BfRU1VTEFUSU9OCQlCSVQoMykK
ICNkZWZpbmUgVkdUX0NBUFNfSFVHRV9HVFQJCUJJVCg0KQorI2RlZmluZSBWR1RfQ0FQU19QVgkJ
QklUKDUpCiAKIHN0cnVjdCB2Z3RfaWYgewogCXU2NCBtYWdpYzsJCS8qIFZHVF9NQUdJQyAqLwpA
QCAtMTA5LDcgKzExMCw5IEBAIHN0cnVjdCB2Z3RfaWYgewogCXUzMiBleGVjbGlzdF9jb250ZXh0
X2Rlc2NyaXB0b3JfbG87CiAJdTMyIGV4ZWNsaXN0X2NvbnRleHRfZGVzY3JpcHRvcl9oaTsKIAot
CXUzMiAgcnN2N1sweDIwMCAtIDI0XTsgICAgLyogcGFkIHRvIG9uZSBwYWdlICovCisJdTMyIHB2
X2NhcHM7CisKKwl1MzIgIHJzdjdbMHgyMDAgLSAyNV07ICAgIC8qIHBhZCB0byBvbmUgcGFnZSAq
LwogfSBfX3BhY2tlZDsKIAogI2RlZmluZSB2Z3RpZl9vZmZzZXQoeCkgKG9mZnNldG9mKHN0cnVj
dCB2Z3RfaWYsIHgpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYwppbmRleCBkYmQxZmEzLi4xYzI2
YTk1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYwpAQCAtOTUsNyArOTUsMTMgQEAgdm9pZCBp
OTE1X2RldGVjdF92Z3B1KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlkZXZf
cHJpdi0+dmdwdS5jYXBzID0gcmVhZGwoc2hhcmVkX2FyZWEgKyB2Z3RpZl9vZmZzZXQodmd0X2Nh
cHMpKTsKIAogCWRldl9wcml2LT52Z3B1LmFjdGl2ZSA9IHRydWU7Ci0JRFJNX0lORk8oIlZpcnR1
YWwgR1BVIGZvciBJbnRlbCBHVlQtZyBkZXRlY3RlZC5cbiIpOworCisJaWYgKCFpbnRlbF92Z3B1
X2NoZWNrX3B2X2NhcHMoZGV2X3ByaXYsIHNoYXJlZF9hcmVhKSkgeworCQlEUk1fSU5GTygiVmly
dHVhbCBHUFUgZm9yIEludGVsIEdWVC1nIGRldGVjdGVkLlxuIik7CisJCXJldHVybjsKKwl9CisK
KwlEUk1fSU5GTygiVmlydHVhbCBHUFUgZm9yIEludGVsIEdWVC1nIGRldGVjdGVkIHdpdGggUFYg
T3B0aW1pemVkLlxuIik7CiAKIG91dDoKIAlwY2lfaW91bm1hcChwZGV2LCBzaGFyZWRfYXJlYSk7
CkBAIC0yOTcsMyArMzAzLDM4IEBAIGludCBpbnRlbF92Z3RfYmFsbG9vbihzdHJ1Y3QgaTkxNV9n
Z3R0ICpnZ3R0KQogCURSTV9FUlJPUigiVkdUIGJhbGxvb24gZmFpbFxuIik7CiAJcmV0dXJuIHJl
dDsKIH0KKworLyoKKyAqIGk5MTUgdmdwdSBQViBzdXBwb3J0IGZvciBMaW51eAorICovCisKKy8q
KgorICogaW50ZWxfdmdwdV9jaGVja19wdl9jYXBzIC0gZGV0ZWN0IHZpcnR1YWwgR1BVIFBWIGNh
cGFiaWxpdGllcworICogQGRldl9wcml2OiBpOTE1IGRldmljZSBwcml2YXRlCisgKgorICogVGhp
cyBmdW5jdGlvbiBpcyBjYWxsZWQgYXQgdGhlIGluaXRpYWxpemF0aW9uIHN0YWdlLCB0byBkZXRl
Y3QgVkdQVQorICogUFYgY2FwYWJpbGl0aWVzCisgKgorICogSWYgZ3Vlc3Qgd2FudHMgdG8gZW5h
YmxlIHB2X2NhcHMsIGl0IG5lZWRzIHRvIGNvbmZpZyBpdCBleHBsaWNpdGx5CisgKiB0aHJvdWdo
IHZndF9pZiBpbnRlcmZhY2UgZnJvbSBndnQgbGF5ZXIuCisgKi8KK2Jvb2wgaW50ZWxfdmdwdV9j
aGVja19wdl9jYXBzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKKwkJdm9pZCBf
X2lvbWVtICpzaGFyZWRfYXJlYSkKK3sKKwl1MzIgZ3Z0X3B2Y2FwczsKKwl1MzIgcHZjYXBzID0g
MDsKKworCWlmICghaW50ZWxfdmdwdV9oYXNfcHZfY2FwcyhkZXZfcHJpdikpCisJCXJldHVybiBm
YWxzZTsKKworCS8qIFBWIGNhcGFiaWxpdHkgbmVnb3RpYXRpb24gYmV0d2VlbiBQViBndWVzdCBh
bmQgR1ZUICovCisJZ3Z0X3B2Y2FwcyA9IHJlYWRsKHNoYXJlZF9hcmVhICsgdmd0aWZfb2Zmc2V0
KHB2X2NhcHMpKTsKKwlwdmNhcHMgPSBkZXZfcHJpdi0+dmdwdS5wdl9jYXBzICYgZ3Z0X3B2Y2Fw
czsKKwlkZXZfcHJpdi0+dmdwdS5wdl9jYXBzID0gcHZjYXBzOworCXdyaXRlbChwdmNhcHMsIHNo
YXJlZF9hcmVhICsgdmd0aWZfb2Zmc2V0KHB2X2NhcHMpKTsKKworCWlmICghcHZjYXBzKQorCQly
ZXR1cm4gZmFsc2U7CisKKwlyZXR1cm4gdHJ1ZTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdmdwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmgK
aW5kZXggOGIzNjYzZC4uYmJlNTZiNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV92Z3B1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmgKQEAgLTQz
LDcgKzQzLDE2IEBACiAJcmV0dXJuIGRldl9wcml2LT52Z3B1LmNhcHMgJiBWR1RfQ0FQU19IVUdF
X0dUVDsKIH0KIAorc3RhdGljIGlubGluZSBib29sCitpbnRlbF92Z3B1X2hhc19wdl9jYXBzKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwlyZXR1cm4gZGV2X3ByaXYtPnZn
cHUuY2FwcyAmIFZHVF9DQVBTX1BWOworfQorCiBpbnQgaW50ZWxfdmd0X2JhbGxvb24oc3RydWN0
IGk5MTVfZ2d0dCAqZ2d0dCk7CiB2b2lkIGludGVsX3ZndF9kZWJhbGxvb24oc3RydWN0IGk5MTVf
Z2d0dCAqZ2d0dCk7CiAKKy8qIGk5MTUgdmdwdSBwdiByZWxhdGVkIGZ1bmN0aW9ucyAqLworYm9v
bCBpbnRlbF92Z3B1X2NoZWNrX3B2X2NhcHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAorCQl2b2lkIF9faW9tZW0gKnNoYXJlZF9hcmVhKTsKICNlbmRpZiAvKiBfSTkxNV9WR1BV
X0hfICovCi0tIAoxLjguMy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwppbnRlbC1ndnQtZGV2IG1haWxpbmcgbGlzdAppbnRlbC1ndnQtZGV2QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWd2dC1kZXY=
