Return-Path: <intel-gvt-dev-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gvt-dev@lfdr.de
Delivered-To: lists+intel-gvt-dev@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7E7EBB4B2D
	for <lists+intel-gvt-dev@lfdr.de>; Tue, 17 Sep 2019 11:46:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 369806EB9B;
	Tue, 17 Sep 2019 09:46:06 +0000 (UTC)
X-Original-To: intel-gvt-dev@lists.freedesktop.org
Delivered-To: intel-gvt-dev@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 291EC6EB98;
 Tue, 17 Sep 2019 09:46:04 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18516772-1500050 for multiple; Tue, 17 Sep 2019 10:45:51 +0100
MIME-Version: 1.0
To: Xiaolin Zhang <xiaolin.zhang@intel.com>, intel-gfx@lists.freedesktop.org, 
 intel-gvt-dev@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <1568699301-2799-4-git-send-email-xiaolin.zhang@intel.com>
References: <1568699301-2799-1-git-send-email-xiaolin.zhang@intel.com>
 <1568699301-2799-4-git-send-email-xiaolin.zhang@intel.com>
Message-ID: <156871354910.5729.15267431439925096016@skylake-alporthouse-com>
User-Agent: alot/0.6
Subject: Re: [PATCH v10 3/9] drm/i915: vgpu pv command buffer support
Date: Tue, 17 Sep 2019 10:45:49 +0100
X-BeenThere: intel-gvt-dev@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: "Intel GVT \(Graphics Virtualization\) development list"
 <intel-gvt-dev.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gvt-dev>
List-Post: <mailto:intel-gvt-dev@lists.freedesktop.org>
List-Help: <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gvt-dev>, 
 <mailto:intel-gvt-dev-request@lists.freedesktop.org?subject=subscribe>
Cc: Xiaolin Zhang <xiaolin.zhang@intel.com>, zhenyu.z.wang@intel.com,
 joonas.lahtinen@linux.intel.com, hang.yuan@intel.com, zhiyuan.lv@intel.com,
 zhi.a.wang@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gvt-dev-bounces@lists.freedesktop.org
Sender: "intel-gvt-dev" <intel-gvt-dev-bounces@lists.freedesktop.org>

UXVvdGluZyBYaWFvbGluIFpoYW5nICgyMDE5LTA5LTE3IDA2OjQ4OjE0KQo+IGJhc2VkIG9uIHRo
ZSBzaGFyZWQgbWVtb3J5IHNldHVwIGJldHdlZW4gZ3Vlc3QgYW5kIEdWVCwgdGhlIHNpbXBsZQo+
IHB2IGNvbW1hbmQgYnVmZmVyIHJpbmcgd2FzIGludHJvZHVjZWQgYnkgdGhpcyBwYXRjaCB1c2Vk
IHRvIHBlcmZvcm0KPiBndWVzdC0yLWd2dCBzaW5nbGUgZGlyZWN0aW9uIGNvbW11bmljYXRpb24u
Cj4gCj4gdjE6IGluaXRpYWwgc3VwcG9ydCwgYWRkZWQgdG8gYWRkcmVzcyBpOTE1IFBWIHY2IHBh
dGNoIHNldCBjb21tZW50Lgo+IAo+IFNpZ25lZC1vZmYtYnk6IFhpYW9saW4gWmhhbmcgPHhpYW9s
aW4uemhhbmdAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3B2
aW5mby5oIHwgICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmMgICB8IDE5
MyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfdmdwdS5oICAgfCAgNjYgKysrKysrKysrKysrKwo+ICAzIGZpbGVzIGNoYW5n
ZWQsIDI2MCBpbnNlcnRpb25zKCspCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcHZpbmZvLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3B2aW5mby5oCj4g
aW5kZXggM2M2MzYwMy4uZGI5ZWViYiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3B2aW5mby5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wdmluZm8u
aAo+IEBAIC00OSw2ICs0OSw3IEBAIGVudW0gdmd0X2cydl90eXBlIHsKPiAgICAgICAgIFZHVF9H
MlZfRVhFQ0xJU1RfQ09OVEVYVF9DUkVBVEUsCj4gICAgICAgICBWR1RfRzJWX0VYRUNMSVNUX0NP
TlRFWFRfREVTVFJPWSwKPiAgICAgICAgIFZHVF9HMlZfU0hBUkVEX1BBR0VfU0VUVVAsCj4gKyAg
ICAgICBWR1RfRzJWX1BWX1NFTkRfVFJJR0dFUiwKPiAgICAgICAgIFZHVF9HMlZfTUFYLAo+ICB9
Owo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYwo+IGluZGV4IDY4ZmVjZmQuLjZlMjlhNTIg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYwo+IEBAIC0zMjIsNiArMzIyLDE4NyBAQCBp
bnQgaW50ZWxfdmd0X2JhbGxvb24oc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKPiAgICogaTkxNSB2
Z3B1IFBWIHN1cHBvcnQgZm9yIExpbnV4Cj4gICAqLwo+ICAKPiArLyoqCj4gKyAqIHdhaXRfZm9y
X2Rlc2NfdXBkYXRlIC0gV2FpdCBmb3IgdGhlIGNvbW1hbmQgYnVmZmVyIGRlc2NyaXB0b3IgdXBk
YXRlLgo+ICsgKiBAZGVzYzogICAgICBidWZmZXIgZGVzY3JpcHRvcgo+ICsgKiBAZmVuY2U6ICAg
ICByZXNwb25zZSBmZW5jZQo+ICsgKiBAc3RhdHVzOiAgICBwbGFjZWhvbGRlciBmb3Igc3RhdHVz
Cj4gKyAqCj4gKyAqIEdWVCB3aWxsIHVwZGF0ZSBjb21tYW5kIGJ1ZmZlciBkZXNjcmlwdG9yIHdp
dGggbmV3IGZlbmNlIGFuZCBzdGF0dXMKPiArICogYWZ0ZXIgcHJvY2Vzc2luZyB0aGUgY29tbWFu
ZCBpZGVudGlmaWVkIGJ5IHRoZSBmZW5jZS4gV2FpdCBmb3IKPiArICogc3BlY2lmaWVkIGZlbmNl
IGFuZCB0aGVuIHJlYWQgZnJvbSB0aGUgZGVzY3JpcHRvciBzdGF0dXMgb2YgdGhlCj4gKyAqIGNv
bW1hbmQuCj4gKyAqCj4gKyAqIFJldHVybjoKPiArICogKiAgIDAgcmVzcG9uc2UgcmVjZWl2ZWQg
KHN0YXR1cyBpcyB2YWxpZCkKPiArICogKiAgIC1FVElNRURPVVQgbm8gcmVzcG9uc2Ugd2l0aGlu
IGhhcmRjb2RlZCB0aW1lb3V0Cj4gKyAqICogICAtRVBST1RPIG5vIHJlc3BvbnNlLCBDVCBidWZm
ZXIgaXMgaW4gZXJyb3IKPiArICovCj4gK3N0YXRpYyBpbnQgd2FpdF9mb3JfZGVzY191cGRhdGUo
c3RydWN0IHZncHVfcHZfY3RfYnVmZmVyX2Rlc2MgKmRlc2MsCj4gKyAgICAgICAgICAgICAgIHUz
MiBmZW5jZSwgdTMyICpzdGF0dXMpCj4gK3sKPiArICAgICAgIGludCBlcnI7Cj4gKwo+ICsjZGVm
aW5lIGRvbmUgKFJFQURfT05DRShkZXNjLT5mZW5jZSkgPT0gZmVuY2UpCj4gKyAgICAgICBlcnIg
PSB3YWl0X2Zvcl91cyhkb25lLCA1KTsKPiArICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAg
ICAgIGVyciA9IHdhaXRfZm9yKGRvbmUsIDEwKTsKPiArI3VuZGVmIGRvbmUKPiArCj4gKyAgICAg
ICBpZiAodW5saWtlbHkoZXJyKSkgewo+ICsgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNUOiBm
ZW5jZSAldSBmYWlsZWQ7IHJlcG9ydGVkIGZlbmNlPSV1XG4iLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmVuY2UsIGRlc2MtPmZlbmNlKTsKPiArICAgICAgIH0KPiArCj4gKyAg
ICAgICAqc3RhdHVzID0gZGVzYy0+c3RhdHVzOwo+ICsgICAgICAgcmV0dXJuIGVycjsKPiArfQo+
ICsKPiArLyoqCj4gKyAqIERPQzogQ1RCIEd1ZXN0IHRvIEdWVCByZXF1ZXN0Cj4gKyAqCj4gKyAq
IEZvcm1hdCBvZiB0aGUgQ1RCIEd1ZXN0IHRvIEdWVCByZXF1ZXN0IG1lc3NhZ2UgaXMgYXMgZm9s
bG93czo6Cj4gKyAqCj4gKyAqICAgICAgKy0tLS0tLS0tLS0tLSstLS0tLS0tLS0rLS0tLS0tLS0t
Ky0tLS0tLS0tLSstLS0tLS0tLS0rCj4gKyAqICAgICAgfCAgIG1zZ1swXSAgIHwgICBbMV0gICB8
ICAgWzJdICAgfCAgIC4uLiAgIHwgIFtuLTFdICB8Cj4gKyAqICAgICAgKy0tLS0tLS0tLS0tLSst
LS0tLS0tLS0rLS0tLS0tLS0tKy0tLS0tLS0tLSstLS0tLS0tLS0rCj4gKyAqICAgICAgfCAgIE1F
U1NBR0UgIHwgICAgICAgTUVTU0FHRSBQQVlMT0FEICAgICAgICAgICAgICAgICB8Cj4gKyAqICAg
ICAgKyAgIEhFQURFUiAgICstLS0tLS0tLS0rLS0tLS0tLS0tKy0tLS0tLS0tLSstLS0tLS0tLS0r
Cj4gKyAqICAgICAgfCAgICAgICAgICAgIHwgICAgMCAgICB8ICAgIDEgICAgfCAgIC4uLiAgIHwg
ICAgbiAgICB8Cj4gKyAqICAgICAgKz09PT09PT09PT09PSs9PT09PT09PT0rPT09PT09PT09Kz09
PT09PT09PSs9PT09PT09PT0rCj4gKyAqICAgICAgfCAgbGVuID49IDEgIHwgIEZFTkNFICB8ICAg
ICByZXF1ZXN0IHNwZWNpZmljIGRhdGEgICB8Cj4gKyAqICAgICAgKy0tLS0tLSstLS0tLSstLS0t
LS0tLS0rLS0tLS0tLS0tKy0tLS0tLS0tLSstLS0tLS0tLS0rCj4gKyAqCj4gKyAqICAgICAgICAg
ICAgICAgICAgIF4tLS0tLS0tLS0tLS0tLS0tLWxlbi0tLS0tLS0tLS0tLS0tLS0tLS1eCj4gKyAq
Lwo+ICtzdGF0aWMgaW50IHB2X2NvbW1hbmRfYnVmZmVyX3dyaXRlKHN0cnVjdCBpOTE1X3ZpcnR1
YWxfZ3B1X3B2ICpwdiwKPiArICAgICAgICAgICAgICAgY29uc3QgdTMyICphY3Rpb24sIHUzMiBs
ZW4gLyogaW4gZHdvcmRzICovLCB1MzIgZmVuY2UpCj4gK3sKPiArICAgICAgIHN0cnVjdCB2Z3B1
X3B2X2N0X2J1ZmZlcl9kZXNjICpkZXNjID0gcHYtPmN0Yi5kZXNjOwo+ICsgICAgICAgdTMyIGhl
YWQgPSBkZXNjLT5oZWFkIC8gNDsgICAgICAvKiBpbiBkd29yZHMgKi8KPiArICAgICAgIHUzMiB0
YWlsID0gZGVzYy0+dGFpbCAvIDQ7ICAgICAgLyogaW4gZHdvcmRzICovCj4gKyAgICAgICB1MzIg
c2l6ZSA9IGRlc2MtPnNpemUgLyA0OyAgICAgIC8qIGluIGR3b3JkcyAqLwo+ICsgICAgICAgdTMy
IHVzZWQ7ICAgICAgICAgICAgICAgICAgICAgICAvKiBpbiBkd29yZHMgKi8KPiArICAgICAgIHUz
MiBoZWFkZXI7Cj4gKyAgICAgICB1MzIgKmNtZHMgPSBwdi0+Y3RiLmNtZHM7Cj4gKyAgICAgICB1
bnNpZ25lZCBpbnQgaTsKPiArCj4gKyAgICAgICBHRU1fQlVHX09OKGRlc2MtPnNpemUgJSA0KTsK
PiArICAgICAgIEdFTV9CVUdfT04oZGVzYy0+aGVhZCAlIDQpOwo+ICsgICAgICAgR0VNX0JVR19P
TihkZXNjLT50YWlsICUgNCk7Cj4gKyAgICAgICBHRU1fQlVHX09OKHRhaWwgPj0gc2l6ZSk7Cj4g
Kwo+ICsgICAgICAgLyoKPiArICAgICAgICAqIHRhaWwgPT0gaGVhZCBjb25kaXRpb24gaW5kaWNh
dGVzIGVtcHR5Lgo+ICsgICAgICAgICovCj4gKyAgICAgICBpZiAodGFpbCA8IGhlYWQpCj4gKyAg
ICAgICAgICAgICAgIHVzZWQgPSAoc2l6ZSAtIGhlYWQpICsgdGFpbDsKPiArICAgICAgIGVsc2UK
PiArICAgICAgICAgICAgICAgdXNlZCA9IHRhaWwgLSBoZWFkOwo+ICsKPiArICAgICAgIC8qIG1h
a2Ugc3VyZSB0aGVyZSBpcyBhIHNwYWNlIGluY2x1ZGluZyBleHRyYSBkdyBmb3IgdGhlIGZlbmNl
ICovCj4gKyAgICAgICBpZiAodW5saWtlbHkodXNlZCArIGxlbiArIDEgPj0gc2l6ZSkpCj4gKyAg
ICAgICAgICAgICAgIHJldHVybiAtRU5PU1BDOwo+ICsKPiArICAgICAgIC8qCj4gKyAgICAgICAg
KiBXcml0ZSB0aGUgbWVzc2FnZS4gVGhlIGZvcm1hdCBpcyB0aGUgZm9sbG93aW5nOgo+ICsgICAg
ICAgICogRFcwOiBoZWFkZXIgKGluY2x1ZGluZyBhY3Rpb24gY29kZSkKPiArICAgICAgICAqIERX
MTogZmVuY2UKPiArICAgICAgICAqIERXMis6IGFjdGlvbiBkYXRhCj4gKyAgICAgICAgKi8KPiAr
ICAgICAgIGhlYWRlciA9IChsZW4gPDwgUFZfQ1RfTVNHX0xFTl9TSElGVCkgfAo+ICsgICAgICAg
ICAgICAgICAgKFBWX0NUX01TR19XUklURV9GRU5DRV9UT19ERVNDKSB8Cj4gKyAgICAgICAgICAg
ICAgICAoYWN0aW9uWzBdIDw8IFBWX0NUX01TR19BQ1RJT05fU0hJRlQpOwo+ICsKPiArICAgICAg
IGNtZHNbdGFpbF0gPSBoZWFkZXI7Cj4gKyAgICAgICB0YWlsID0gKHRhaWwgKyAxKSAlIHNpemU7
Cj4gKwo+ICsgICAgICAgY21kc1t0YWlsXSA9IGZlbmNlOwo+ICsgICAgICAgdGFpbCA9ICh0YWls
ICsgMSkgJSBzaXplOwo+ICsKPiArICAgICAgIGZvciAoaSA9IDE7IGkgPCBsZW47IGkrKykgewo+
ICsgICAgICAgICAgICAgICBjbWRzW3RhaWxdID0gYWN0aW9uW2ldOwo+ICsgICAgICAgICAgICAg
ICB0YWlsID0gKHRhaWwgKyAxKSAlIHNpemU7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyog
bm93IHVwZGF0ZSBkZXNjIHRhaWwgKGJhY2sgaW4gYnl0ZXMpICovCgp3bWIoKTsKCkFuc3dlcnMg
b24gYSBwb3N0Y2FyZCBhcyB0byB3aHkgdGhpcyBpcyByZXF1aXJlZCBhbmQgd2hlcmUgdGhlCmNv
bXBsZW1lbnRhcnkgcm1iL21iIHNob3VsZCBiZS4KCj4gKyAgICAgICBkZXNjLT50YWlsID0gdGFp
bCAqIDQ7Cj4gKyAgICAgICBHRU1fQlVHX09OKGRlc2MtPnRhaWwgPiBkZXNjLT5zaXplKTsKPiAr
Cj4gKyAgICAgICByZXR1cm4gMDsKPiArfQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwppbnRlbC1ndnQtZGV2IG1haWxpbmcgbGlzdAppbnRlbC1ndnQtZGV2
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWd2dC1kZXY=
